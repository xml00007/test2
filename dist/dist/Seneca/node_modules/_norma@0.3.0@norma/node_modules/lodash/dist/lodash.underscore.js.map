{"version":3,"sources":["../../../../../../../Seneca/node_modules/_norma@0.3.0@norma/node_modules/lodash/dist/lodash.underscore.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","undefined","idCounter","indicatorObject","keyPrefix","Date","reInterpolate","reNoMatch","reUnescapedString","argsClass","arrayClass","boolClass","dateClass","funcClass","numberClass","objectClass","regexpClass","stringClass","objectTypes","stringEscapes","root","window","freeExports","exports","nodeType","freeModule","module","moduleExports","freeGlobal","global","baseIndexOf","array","value","fromIndex","index","length","compareAscending","a","b","ac","criteria","bc","other","escapeStringChar","match","slice","start","end","result","Array","arrayRef","objectProto","Object","oldDash","_","toString","reNative","RegExp","String","replace","ceil","Math","floor","hasOwnProperty","push","propertyIsEnumerable","nativeCreate","isNative","create","nativeIsArray","isArray","nativeIsFinite","isFinite","nativeIsNaN","isNaN","nativeKeys","keys","nativeMax","max","nativeMin","min","nativeRandom","random","lodash","lodashWrapper","chainAll","__chain__","__wrapped__","support","object","spliceObjects","splice","call","templateSettings","baseBind","bindData","func","partialArgs","thisArg","bound","args","apply","arguments","thisBinding","baseCreate","isObject","properties","baseCreateCallback","argCount","identity","collection","accumulator","bind","baseCreateWrapper","bitmask","partialRightArgs","arity","isBind","isBindKey","isCurry","isCurryBound","key","baseDifference","values","indexOf","getIndexOf","baseFlatten","isShallow","isStrict","isArguments","valIndex","valLength","resIndex","baseIsEqual","stackA","stackB","type","otherType","className","otherClass","isArr","aWrapped","bWrapped","ctorA","ctorB","isFunction","size","forIn","pop","baseRandom","baseUniq","isSorted","callback","seen","computed","createAggregator","setter","createCallback","forOwn","createWrapper","isPartial","isPartialRight","TypeError","creater","escapeHtmlChar","htmlEscapes","test","unescapeHtmlChar","htmlUnescapes","shimKeys","iterable","invert","reEscapedHtml","join","reUnescapedHtml","assign","argsIndex","argsLength","clone","defaults","functions","sort","has","props","isBoolean","isDate","isElement","isEmpty","isString","isEqual","parseFloat","isNumber","isNull","isRegExp","isUndefined","omit","pairs","pick","contains","target","countBy","every","filter","find","findWhere","where","forEach","forEachRight","groupBy","indexBy","invoke","methodName","isFunc","map","Infinity","current","pluck","reduce","noaccum","reduceRight","reject","sample","n","guard","shuffle","rand","some","sortBy","toArray","first","compact","difference","flatten","sortedIndex","initial","intersection","outer","last","lastIndexOf","range","step","rest","low","high","mid","union","uniq","without","zip","zipObject","after","bindAll","funcs","compose","debounce","wait","options","maxTimeoutId","stamp","timeoutId","trailingCall","lastCalled","maxWait","trailing","leading","delayed","remaining","now","clearTimeout","isCalled","setTimeout","maxDelayed","leadingCall","defer","delay","memoize","resolver","cache","once","ran","partial","throttle","wrap","wrapper","property","escape","string","mixin","noConflict","noop","getTime","template","text","data","settings","source","variable","reDelimiters","interpolate","evaluate","escapeValue","interpolateValue","evaluateValue","offset","Function","e","times","unescape","uniqueId","prefix","id","chain","tap","interceptor","wrapperChain","wrapperValueOf","collect","drop","each","extend","methods","select","tail","unique","all","any","detect","foldl","foldr","include","inject","take","head","VERSION","define","amd"],"mappings":"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","file":"lodash.underscore.js","sourcesContent":["'use strict';\n\nlet _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * @license\n * Lo-Dash 2.4.2 (Custom Build) <https://lodash.com/>\n * Build: `lodash underscore exports=\"amd,commonjs,global,node\" -o ./dist/lodash.underscore.js`\n * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n;(function () {\n\n  /** Used as a safe reference for `undefined` in pre ES5 environments */\n  let undefined;\n\n  /** Used to generate unique IDs */\n  let idCounter = 0;\n\n  /** Used internally to indicate letious things */\n  let indicatorObject = {};\n\n  /** Used to prefix keys to avoid issues with `__proto__` and properties on `Object.prototype` */\n  let keyPrefix = +new Date() + '';\n\n  /** Used to match \"interpolate\" template delimiters */\n  let reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to ensure capturing order of template delimiters */\n  let reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals */\n  let reUnescapedString = /['\\n\\r\\t\\u2028\\u2029\\\\]/g;\n\n  /** `Object#toString` result shortcuts */\n  let argsClass = '[object Arguments]',\n      arrayClass = '[object Array]',\n      boolClass = '[object Boolean]',\n      dateClass = '[object Date]',\n      funcClass = '[object Function]',\n      numberClass = '[object Number]',\n      objectClass = '[object Object]',\n      regexpClass = '[object RegExp]',\n      stringClass = '[object String]';\n\n  /** Used to determine if values are of the language type Object */\n  let objectTypes = {\n    'boolean': false,\n    'function': true,\n    'object': true,\n    'number': false,\n    'string': false,\n    'undefined': false\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals */\n  let stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Used as a reference to the global object */\n  let root = objectTypes[typeof window === 'undefined' ? 'undefined' : _typeof(window)] && window || this;\n\n  /** Detect free letiable `exports` */\n  let freeExports = objectTypes[typeof exports === 'undefined' ? 'undefined' : _typeof(exports)] && exports && !exports.nodeType && exports;\n\n  /** Detect free letiable `module` */\n  let freeModule = objectTypes[typeof module === 'undefined' ? 'undefined' : _typeof(module)] && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports` */\n  let moduleExports = freeModule && freeModule.exports === freeExports && freeExports;\n\n  /** Detect free letiable `global` from Node.js or Browserified code and use it as `root` */\n  let freeGlobal = objectTypes[typeof global === 'undefined' ? 'undefined' : _typeof(global)] && global;\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * The base implementation of `_.indexOf` without support for binary searches\n   * or `fromIndex` constraints.\n   *\n   * @private\n   * @param {Array} array The array to search.\n   * @param {*} value The value to search for.\n   * @param {number} [fromIndex=0] The index to search from.\n   * @returns {number} Returns the index of the matched value or `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    let index = (fromIndex || 0) - 1,\n        length = array ? array.length : 0;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Used by `sortBy` to compare transformed `collection` elements, stable sorting\n   * them in ascending order.\n   *\n   * @private\n   * @param {Object} a The object to compare to `b`.\n   * @param {Object} b The object to compare to `a`.\n   * @returns {number} Returns the sort order indicator of `1` or `-1`.\n   */\n  function compareAscending(a, b) {\n    let ac = a.criteria,\n        bc = b.criteria,\n        index = -1,\n        length = ac.length;\n\n    while (++index < length) {\n      let value = ac[index],\n          other = bc[index];\n\n      if (value !== other) {\n        if (value > other || typeof value == 'undefined') {\n          return 1;\n        }\n        if (value < other || typeof other == 'undefined') {\n          return -1;\n        }\n      }\n    }\n    // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n    // that causes it, under certain circumstances, to return the same value for\n    // `a` and `b`. See https://github.com/jashkenas/underscore/pull/1247\n    //\n    // This also ensures a stable sort in V8 and other engines.\n    // See http://code.google.com/p/v8/issues/detail?id=90\n    return a.index - b.index;\n  }\n\n  /**\n   * Used by `template` to escape characters for inclusion in compiled\n   * string literals.\n   *\n   * @private\n   * @param {string} match The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(match) {\n    return '\\\\' + stringEscapes[match];\n  }\n\n  /**\n   * Slices the `collection` from the `start` index up to, but not including,\n   * the `end` index.\n   *\n   * Note: This function is used instead of `Array#slice` to support node lists\n   * in IE < 9 and to ensure dense arrays are returned.\n   *\n   * @private\n   * @param {Array|Object|string} collection The collection to slice.\n   * @param {number} start The start index.\n   * @param {number} end The end index.\n   * @returns {Array} Returns the new array.\n   */\n  function slice(array, start, end) {\n    start || (start = 0);\n    if (typeof end == 'undefined') {\n      end = array ? array.length : 0;\n    }\n    let index = -1,\n        length = end - start || 0,\n        result = Array(length < 0 ? 0 : length);\n\n    while (++index < length) {\n      result[index] = array[start + index];\n    }\n    return result;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Used for `Array` method references.\n   *\n   * Normally `Array.prototype` would suffice, however, using an array literal\n   * avoids issues in Narwhal.\n   */\n  let arrayRef = [];\n\n  /** Used for native method references */\n  let objectProto = Object.prototype;\n\n  /** Used to restore the original `_` reference in `noConflict` */\n  let oldDash = root._;\n\n  /** Used to resolve the internal [[Class]] of values */\n  let toString = objectProto.toString;\n\n  /** Used to detect if a method is native */\n  let reNative = RegExp('^' + String(toString).replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&').replace(/toString| for [^\\]]+/g, '.*?') + '$');\n\n  /** Native method shortcuts */\n  let ceil = Math.ceil,\n      floor = Math.floor,\n      hasOwnProperty = objectProto.hasOwnProperty,\n      push = arrayRef.push,\n      propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n  /* Native method shortcuts for methods with the same name as other `lodash` methods */\n  let nativeCreate = isNative(nativeCreate = Object.create) && nativeCreate,\n      nativeIsArray = isNative(nativeIsArray = Array.isArray) && nativeIsArray,\n      nativeIsFinite = root.isFinite,\n      nativeIsNaN = root.isNaN,\n      nativeKeys = isNative(nativeKeys = Object.keys) && nativeKeys,\n      nativeMax = Math.max,\n      nativeMin = Math.min,\n      nativeRandom = Math.random;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a `lodash` object which wraps the given value to enable intuitive\n   * method chaining.\n   *\n   * In addition to Lo-Dash methods, wrappers also have the following `Array` methods:\n   * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`, `splice`,\n   * and `unshift`\n   *\n   * Chaining is supported in custom builds as long as the `value` method is\n   * implicitly or explicitly included in the build.\n   *\n   * The chainable wrapper functions are:\n   * `after`, `assign`, `bind`, `bindAll`, `bindKey`, `chain`, `compact`,\n   * `compose`, `concat`, `countBy`, `create`, `createCallback`, `curry`,\n   * `debounce`, `defaults`, `defer`, `delay`, `difference`, `filter`, `flatten`,\n   * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,\n   * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,\n   * `invoke`, `keys`, `map`, `max`, `memoize`, `merge`, `min`, `object`, `omit`,\n   * `once`, `pairs`, `partial`, `partialRight`, `pick`, `pluck`, `pull`, `push`,\n   * `range`, `reject`, `remove`, `rest`, `reverse`, `shuffle`, `slice`, `sort`,\n   * `sortBy`, `splice`, `tap`, `throttle`, `times`, `toArray`, `transform`,\n   * `union`, `uniq`, `unshift`, `unzip`, `values`, `where`, `without`, `wrap`,\n   * and `zip`\n   *\n   * The non-chainable wrapper functions are:\n   * `clone`, `cloneDeep`, `contains`, `escape`, `every`, `find`, `findIndex`,\n   * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `has`, `identity`,\n   * `indexOf`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,\n   * `isEmpty`, `isEqual`, `isFinite`, `isFunction`, `isNaN`, `isNull`, `isNumber`,\n   * `isObject`, `isPlainObject`, `isRegExp`, `isString`, `isUndefined`, `join`,\n   * `lastIndexOf`, `mixin`, `noConflict`, `parseInt`, `pop`, `random`, `reduce`,\n   * `reduceRight`, `result`, `shift`, `size`, `some`, `sortedIndex`, `runInContext`,\n   * `template`, `unescape`, `uniqueId`, and `value`\n   *\n   * The wrapper functions `first` and `last` return wrapped values when `n` is\n   * provided, otherwise they return unwrapped values.\n   *\n   * Explicit chaining can be enabled by using the `_.chain` method.\n   *\n   * @name _\n   * @constructor\n   * @category Chaining\n   * @param {*} value The value to wrap in a `lodash` instance.\n   * @returns {Object} Returns a `lodash` instance.\n   * @example\n   *\n   * let wrapped = _([1, 2, 3]);\n   *\n   * // returns an unwrapped value\n   * wrapped.reduce(function(sum, num) {\n   *   return sum + num;\n   * });\n   * // => 6\n   *\n   * // returns a wrapped value\n   * let squares = wrapped.map(function(num) {\n   *   return num * num;\n   * });\n   *\n   * _.isArray(squares);\n   * // => false\n   *\n   * _.isArray(squares.value());\n   * // => true\n   */\n  function lodash(value) {\n    return value instanceof lodash ? value : new lodashWrapper(value);\n  }\n\n  /**\n   * A fast path for creating `lodash` wrapper objects.\n   *\n   * @private\n   * @param {*} value The value to wrap in a `lodash` instance.\n   * @param {boolean} chainAll A flag to enable chaining for all methods\n   * @returns {Object} Returns a `lodash` instance.\n   */\n  function lodashWrapper(value, chainAll) {\n    this.__chain__ = !!chainAll;\n    this.__wrapped__ = value;\n  }\n  // ensure `new lodashWrapper` is an instance of `lodash`\n  lodashWrapper.prototype = lodash.prototype;\n\n  /**\n   * An object used to flag environments features.\n   *\n   * @static\n   * @memberOf _\n   * @type Object\n   */\n  let support = {};\n\n  (function () {\n    let object = { '0': 1, 'length': 1 };\n\n    /**\n     * Detect if `Array#shift` and `Array#splice` augment array-like objects correctly.\n     *\n     * Firefox < 10, IE compatibility mode, and IE < 9 have buggy Array `shift()`\n     * and `splice()` functions that fail to remove the last element, `value[0]`,\n     * of array-like objects even though the `length` property is set to `0`.\n     * The `shift()` method is buggy in IE 8 compatibility mode, while `splice()`\n     * is buggy regardless of mode in IE < 9 and buggy in compatibility mode in IE 9.\n     *\n     * @memberOf _.support\n     * @type boolean\n     */\n    support.spliceObjects = (arrayRef.splice.call(object, 0, 1), !object[0]);\n  })(1);\n\n  /**\n   * By default, the template delimiters used by Lo-Dash are similar to those in\n   * embedded Ruby (ERB). Change the following template settings to use alternative\n   * delimiters.\n   *\n   * @static\n   * @memberOf _\n   * @type Object\n   */\n  lodash.templateSettings = {\n\n    /**\n     * Used to detect `data` property values to be HTML-escaped.\n     *\n     * @memberOf _.templateSettings\n     * @type RegExp\n     */\n    'escape': /<%-([\\s\\S]+?)%>/g,\n\n    /**\n     * Used to detect code to be evaluated.\n     *\n     * @memberOf _.templateSettings\n     * @type RegExp\n     */\n    'evaluate': /<%([\\s\\S]+?)%>/g,\n\n    /**\n     * Used to detect `data` property values to inject.\n     *\n     * @memberOf _.templateSettings\n     * @type RegExp\n     */\n    'interpolate': reInterpolate,\n\n    /**\n     * Used to reference the data object in the template text.\n     *\n     * @memberOf _.templateSettings\n     * @type string\n     */\n    'letiable': ''\n  };\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * The base implementation of `_.bind` that creates the bound function and\n   * sets its meta data.\n   *\n   * @private\n   * @param {Array} bindData The bind data array.\n   * @returns {Function} Returns the new bound function.\n   */\n  function baseBind(bindData) {\n    let func = bindData[0],\n        partialArgs = bindData[2],\n        thisArg = bindData[4];\n\n    function bound() {\n      // `Function#bind` spec\n      // http://es5.github.io/#x15.3.4.5\n      if (partialArgs) {\n        // avoid `arguments` object deoptimizations by using `slice` instead\n        // of `Array.prototype.slice.call` and not assigning `arguments` to a\n        // letiable as a ternary expression\n        let args = slice(partialArgs);\n        push.apply(args, arguments);\n      }\n      // mimic the constructor's `return` behavior\n      // http://es5.github.io/#x13.2.2\n      if (this instanceof bound) {\n        // ensure `new bound` is an instance of `func`\n        let thisBinding = baseCreate(func.prototype),\n            result = func.apply(thisBinding, args || arguments);\n        return isObject(result) ? result : thisBinding;\n      }\n      return func.apply(thisArg, args || arguments);\n    }\n    return bound;\n  }\n\n  /**\n   * The base implementation of `_.create` without support for assigning\n   * properties to the created object.\n   *\n   * @private\n   * @param {Object} prototype The object to inherit from.\n   * @returns {Object} Returns the new object.\n   */\n  function baseCreate(prototype, properties) {\n    return isObject(prototype) ? nativeCreate(prototype) : {};\n  }\n  // fallback for browsers without `Object.create`\n  if (!nativeCreate) {\n    baseCreate = function () {\n      function Object() {}\n      return function (prototype) {\n        if (isObject(prototype)) {\n          Object.prototype = prototype;\n          let result = new Object();\n          Object.prototype = null;\n        }\n        return result || root.Object();\n      };\n    }();\n  }\n\n  /**\n   * The base implementation of `_.createCallback` without support for creating\n   * \"_.pluck\" or \"_.where\" style callbacks.\n   *\n   * @private\n   * @param {*} [func=identity] The value to convert to a callback.\n   * @param {*} [thisArg] The `this` binding of the created callback.\n   * @param {number} [argCount] The number of arguments the callback accepts.\n   * @returns {Function} Returns a callback function.\n   */\n  function baseCreateCallback(func, thisArg, argCount) {\n    if (typeof func != 'function') {\n      return identity;\n    }\n    // exit early for no `thisArg` or already bound by `Function#bind`\n    if (typeof thisArg == 'undefined' || !('prototype' in func)) {\n      return func;\n    }\n    switch (argCount) {\n      case 1:\n        return function (value) {\n          return func.call(thisArg, value);\n        };\n      case 2:\n        return function (a, b) {\n          return func.call(thisArg, a, b);\n        };\n      case 3:\n        return function (value, index, collection) {\n          return func.call(thisArg, value, index, collection);\n        };\n      case 4:\n        return function (accumulator, value, index, collection) {\n          return func.call(thisArg, accumulator, value, index, collection);\n        };\n    }\n    return bind(func, thisArg);\n  }\n\n  /**\n   * The base implementation of `createWrapper` that creates the wrapper and\n   * sets its meta data.\n   *\n   * @private\n   * @param {Array} bindData The bind data array.\n   * @returns {Function} Returns the new function.\n   */\n  function baseCreateWrapper(bindData) {\n    let func = bindData[0],\n        bitmask = bindData[1],\n        partialArgs = bindData[2],\n        partialRightArgs = bindData[3],\n        thisArg = bindData[4],\n        arity = bindData[5];\n\n    let isBind = bitmask & 1,\n        isBindKey = bitmask & 2,\n        isCurry = bitmask & 4,\n        isCurryBound = bitmask & 8,\n        key = func;\n\n    function bound() {\n      let thisBinding = isBind ? thisArg : this;\n      if (partialArgs) {\n        let args = slice(partialArgs);\n        push.apply(args, arguments);\n      }\n      if (partialRightArgs || isCurry) {\n        args || (args = slice(arguments));\n        if (partialRightArgs) {\n          push.apply(args, partialRightArgs);\n        }\n        if (isCurry && args.length < arity) {\n          bitmask |= 16 & ~32;\n          return baseCreateWrapper([func, isCurryBound ? bitmask : bitmask & ~3, args, null, thisArg, arity]);\n        }\n      }\n      args || (args = arguments);\n      if (isBindKey) {\n        func = thisBinding[key];\n      }\n      if (this instanceof bound) {\n        thisBinding = baseCreate(func.prototype);\n        let result = func.apply(thisBinding, args);\n        return isObject(result) ? result : thisBinding;\n      }\n      return func.apply(thisBinding, args);\n    }\n    return bound;\n  }\n\n  /**\n   * The base implementation of `_.difference` that accepts a single array\n   * of values to exclude.\n   *\n   * @private\n   * @param {Array} array The array to process.\n   * @param {Array} [values] The array of values to exclude.\n   * @returns {Array} Returns a new array of filtered values.\n   */\n  function baseDifference(array, values) {\n    let index = -1,\n        indexOf = getIndexOf(),\n        length = array ? array.length : 0,\n        result = [];\n\n    while (++index < length) {\n      let value = array[index];\n      if (indexOf(values, value) < 0) {\n        result.push(value);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.flatten` without support for callback\n   * shorthands or `thisArg` binding.\n   *\n   * @private\n   * @param {Array} array The array to flatten.\n   * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.\n   * @param {boolean} [isStrict=false] A flag to restrict flattening to arrays and `arguments` objects.\n   * @param {number} [fromIndex=0] The index to start from.\n   * @returns {Array} Returns a new flattened array.\n   */\n  function baseFlatten(array, isShallow, isStrict, fromIndex) {\n    let index = (fromIndex || 0) - 1,\n        length = array ? array.length : 0,\n        result = [];\n\n    while (++index < length) {\n      let value = array[index];\n\n      if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) == 'object' && typeof value.length == 'number' && (isArray(value) || isArguments(value))) {\n        // recursively flatten arrays (susceptible to call stack limits)\n        if (!isShallow) {\n          value = baseFlatten(value, isShallow, isStrict);\n        }\n        let valIndex = -1,\n            valLength = value.length,\n            resIndex = result.length;\n\n        result.length += valLength;\n        while (++valIndex < valLength) {\n          result[resIndex++] = value[valIndex];\n        }\n      } else if (!isStrict) {\n        result.push(value);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.isEqual`, without support for `thisArg` binding,\n   * that allows partial \"_.where\" style comparisons.\n   *\n   * @private\n   * @param {*} a The value to compare.\n   * @param {*} b The other value to compare.\n   * @param {Function} [callback] The function to customize comparing values.\n   * @param {Function} [isWhere=false] A flag to indicate performing partial comparisons.\n   * @param {Array} [stackA=[]] Tracks traversed `a` objects.\n   * @param {Array} [stackB=[]] Tracks traversed `b` objects.\n   * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n   */\n  function baseIsEqual(a, b, stackA, stackB) {\n    if (a === b) {\n      return a !== 0 || 1 / a == 1 / b;\n    }\n    let type = typeof a === 'undefined' ? 'undefined' : _typeof(a),\n        otherType = typeof b === 'undefined' ? 'undefined' : _typeof(b);\n\n    if (a === a && !(a && objectTypes[type]) && !(b && objectTypes[otherType])) {\n      return false;\n    }\n    if (a == null || b == null) {\n      return a === b;\n    }\n    let className = toString.call(a),\n        otherClass = toString.call(b);\n\n    if (className != otherClass) {\n      return false;\n    }\n    switch (className) {\n      case boolClass:\n      case dateClass:\n        return +a == +b;\n\n      case numberClass:\n        return a != +a ? b != +b : a == 0 ? 1 / a == 1 / b : a == +b;\n\n      case regexpClass:\n      case stringClass:\n        return a == String(b);\n    }\n    let isArr = className == arrayClass;\n    if (!isArr) {\n      let aWrapped = a instanceof lodash,\n          bWrapped = b instanceof lodash;\n\n      if (aWrapped || bWrapped) {\n        return baseIsEqual(aWrapped ? a.__wrapped__ : a, bWrapped ? b.__wrapped__ : b, stackA, stackB);\n      }\n      if (className != objectClass) {\n        return false;\n      }\n      let ctorA = a.constructor,\n          ctorB = b.constructor;\n\n      if (ctorA != ctorB && !(isFunction(ctorA) && ctorA instanceof ctorA && isFunction(ctorB) && ctorB instanceof ctorB) && 'constructor' in a && 'constructor' in b) {\n        return false;\n      }\n    }\n    stackA || (stackA = []);\n    stackB || (stackB = []);\n\n    let length = stackA.length;\n    while (length--) {\n      if (stackA[length] == a) {\n        return stackB[length] == b;\n      }\n    }\n    let result = true,\n        size = 0;\n\n    stackA.push(a);\n    stackB.push(b);\n\n    if (isArr) {\n      size = b.length;\n      result = size == a.length;\n\n      if (result) {\n        while (size--) {\n          if (!(result = baseIsEqual(a[size], b[size], stackA, stackB))) {\n            break;\n          }\n        }\n      }\n    } else {\n      forIn(b, function (value, key, b) {\n        if (hasOwnProperty.call(b, key)) {\n          size++;\n          return !(result = hasOwnProperty.call(a, key) && baseIsEqual(a[key], value, stackA, stackB)) && indicatorObject;\n        }\n      });\n\n      if (result) {\n        forIn(a, function (value, key, a) {\n          if (hasOwnProperty.call(a, key)) {\n            return !(result = --size > -1) && indicatorObject;\n          }\n        });\n      }\n    }\n    stackA.pop();\n    stackB.pop();\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.random` without argument juggling or support\n   * for returning floating-point numbers.\n   *\n   * @private\n   * @param {number} min The minimum possible value.\n   * @param {number} max The maximum possible value.\n   * @returns {number} Returns a random number.\n   */\n  function baseRandom(min, max) {\n    return min + floor(nativeRandom() * (max - min + 1));\n  }\n\n  /**\n   * The base implementation of `_.uniq` without support for callback shorthands\n   * or `thisArg` binding.\n   *\n   * @private\n   * @param {Array} array The array to process.\n   * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.\n   * @param {Function} [callback] The function called per iteration.\n   * @returns {Array} Returns a duplicate-value-free array.\n   */\n  function baseUniq(array, isSorted, callback) {\n    let index = -1,\n        indexOf = getIndexOf(),\n        length = array ? array.length : 0,\n        result = [],\n        seen = callback ? [] : result;\n\n    while (++index < length) {\n      let value = array[index],\n          computed = callback ? callback(value, index, array) : value;\n\n      if (isSorted ? !index || seen[seen.length - 1] !== computed : indexOf(seen, computed) < 0) {\n        if (callback) {\n          seen.push(computed);\n        }\n        result.push(value);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Creates a function that aggregates a collection, creating an object composed\n   * of keys generated from the results of running each element of the collection\n   * through a callback. The given `setter` function sets the keys and values\n   * of the composed object.\n   *\n   * @private\n   * @param {Function} setter The setter function.\n   * @returns {Function} Returns the new aggregator function.\n   */\n  function createAggregator(setter) {\n    return function (collection, callback, thisArg) {\n      let result = {};\n      callback = createCallback(callback, thisArg, 3);\n\n      let index = -1,\n          length = collection ? collection.length : 0;\n\n      if (typeof length == 'number') {\n        while (++index < length) {\n          let value = collection[index];\n          setter(result, value, callback(value, index, collection), collection);\n        }\n      } else {\n        forOwn(collection, function (value, key, collection) {\n          setter(result, value, callback(value, key, collection), collection);\n        });\n      }\n      return result;\n    };\n  }\n\n  /**\n   * Creates a function that, when called, either curries or invokes `func`\n   * with an optional `this` binding and partially applied arguments.\n   *\n   * @private\n   * @param {Function|string} func The function or method name to reference.\n   * @param {number} bitmask The bitmask of method flags to compose.\n   *  The bitmask may be composed of the following flags:\n   *  1 - `_.bind`\n   *  2 - `_.bindKey`\n   *  4 - `_.curry`\n   *  8 - `_.curry` (bound)\n   *  16 - `_.partial`\n   *  32 - `_.partialRight`\n   * @param {Array} [partialArgs] An array of arguments to prepend to those\n   *  provided to the new function.\n   * @param {Array} [partialRightArgs] An array of arguments to append to those\n   *  provided to the new function.\n   * @param {*} [thisArg] The `this` binding of `func`.\n   * @param {number} [arity] The arity of `func`.\n   * @returns {Function} Returns the new function.\n   */\n  function createWrapper(func, bitmask, partialArgs, partialRightArgs, thisArg, arity) {\n    let isBind = bitmask & 1,\n        isBindKey = bitmask & 2,\n        isCurry = bitmask & 4,\n        isCurryBound = bitmask & 8,\n        isPartial = bitmask & 16,\n        isPartialRight = bitmask & 32;\n\n    if (!isBindKey && !isFunction(func)) {\n      throw new TypeError();\n    }\n    if (isPartial && !partialArgs.length) {\n      bitmask &= ~16;\n      isPartial = partialArgs = false;\n    }\n    if (isPartialRight && !partialRightArgs.length) {\n      bitmask &= ~32;\n      isPartialRight = partialRightArgs = false;\n    }\n    // fast path for `_.bind`\n    let creater = bitmask == 1 || bitmask === 17 ? baseBind : baseCreateWrapper;\n    return creater([func, bitmask, partialArgs, partialRightArgs, thisArg, arity]);\n  }\n\n  /**\n   * Used by `escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} match The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeHtmlChar(match) {\n    return htmlEscapes[match];\n  }\n\n  /**\n   * Gets the appropriate \"indexOf\" function. If the `_.indexOf` method is\n   * customized, this method returns the custom method, otherwise it returns\n   * the `baseIndexOf` function.\n   *\n   * @private\n   * @returns {Function} Returns the \"indexOf\" function.\n   */\n  function getIndexOf() {\n    let result = (result = lodash.indexOf) === indexOf ? baseIndexOf : result;\n    return result;\n  }\n\n  /**\n   * Checks if `value` is a native function.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is a native function, else `false`.\n   */\n  function isNative(value) {\n    return typeof value == 'function' && reNative.test(value);\n  }\n\n  /**\n   * Used by `unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} match The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  function unescapeHtmlChar(match) {\n    return htmlUnescapes[match];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Checks if `value` is an `arguments` object.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is an `arguments` object, else `false`.\n   * @example\n   *\n   * (function() { return _.isArguments(arguments); })(1, 2, 3);\n   * // => true\n   *\n   * _.isArguments([1, 2, 3]);\n   * // => false\n   */\n  function isArguments(value) {\n    return value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) == 'object' && typeof value.length == 'number' && toString.call(value) == argsClass || false;\n  }\n  // fallback for browsers that can't detect `arguments` objects by [[Class]]\n  if (!isArguments(arguments)) {\n    isArguments = function isArguments(value) {\n      return value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) == 'object' && typeof value.length == 'number' && hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee') || false;\n    };\n  }\n\n  /**\n   * Checks if `value` is an array.\n   *\n   * @static\n   * @memberOf _\n   * @type Function\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is an array, else `false`.\n   * @example\n   *\n   * (function() { return _.isArray(arguments); })();\n   * // => false\n   *\n   * _.isArray([1, 2, 3]);\n   * // => true\n   */\n  let isArray = nativeIsArray || function (value) {\n    return value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) == 'object' && typeof value.length == 'number' && toString.call(value) == arrayClass || false;\n  };\n\n  /**\n   * A fallback implementation of `Object.keys` which produces an array of the\n   * given object's own enumerable property names.\n   *\n   * @private\n   * @type Function\n   * @param {Object} object The object to inspect.\n   * @returns {Array} Returns an array of property names.\n   */\n  let shimKeys = function shimKeys(object) {\n    let index,\n        iterable = object,\n        result = [];\n    if (!iterable) return result;\n    if (!objectTypes[typeof object === 'undefined' ? 'undefined' : _typeof(object)]) return result;\n    for (index in iterable) {\n      if (hasOwnProperty.call(iterable, index)) {\n        result.push(index);\n      }\n    }\n    return result;\n  };\n\n  /**\n   * Creates an array composed of the own enumerable property names of an object.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to inspect.\n   * @returns {Array} Returns an array of property names.\n   * @example\n   *\n   * _.keys({ 'one': 1, 'two': 2, 'three': 3 });\n   * // => ['one', 'two', 'three'] (property order is not guaranteed across environments)\n   */\n  let keys = !nativeKeys ? shimKeys : function (object) {\n    if (!isObject(object)) {\n      return [];\n    }\n    return nativeKeys(object);\n  };\n\n  /**\n   * Used to convert characters to HTML entities:\n   *\n   * Though the `>` character is escaped for symmetry, characters like `>` and `/`\n   * don't require escaping in HTML and have no special meaning unless they're part\n   * of a tag or an unquoted attribute value.\n   * http://mathiasbynens.be/notes/ambiguous-ampersands (under \"semi-related fun fact\")\n   */\n  let htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;'\n  };\n\n  /** Used to convert HTML entities to characters */\n  let htmlUnescapes = invert(htmlEscapes);\n\n  /** Used to match HTML entities and HTML characters */\n  let reEscapedHtml = RegExp('(' + keys(htmlUnescapes).join('|') + ')', 'g'),\n      reUnescapedHtml = RegExp('[' + keys(htmlEscapes).join('') + ']', 'g');\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Assigns own enumerable properties of source object(s) to the destination\n   * object. Subsequent sources will overwrite property assignments of previous\n   * sources. If a callback is provided it will be executed to produce the\n   * assigned values. The callback is bound to `thisArg` and invoked with two\n   * arguments; (objectValue, sourceValue).\n   *\n   * @static\n   * @memberOf _\n   * @type Function\n   * @alias extend\n   * @category Objects\n   * @param {Object} object The destination object.\n   * @param {...Object} [source] The source objects.\n   * @param {Function} [callback] The function to customize assigning values.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Object} Returns the destination object.\n   * @example\n   *\n   * _.assign({ 'name': 'fred' }, { 'employer': 'slate' });\n   * // => { 'name': 'fred', 'employer': 'slate' }\n   *\n   * let defaults = _.partialRight(_.assign, function(a, b) {\n   *   return typeof a == 'undefined' ? b : a;\n   * });\n   *\n   * let object = { 'name': 'barney' };\n   * defaults(object, { 'name': 'fred', 'employer': 'slate' });\n   * // => { 'name': 'barney', 'employer': 'slate' }\n   */\n  function assign(object) {\n    if (!object) {\n      return object;\n    }\n    for (let argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n      let iterable = arguments[argsIndex];\n      if (iterable) {\n        for (let key in iterable) {\n          object[key] = iterable[key];\n        }\n      }\n    }\n    return object;\n  }\n\n  /**\n   * Creates a clone of `value`. If `isDeep` is `true` nested objects will also\n   * be cloned, otherwise they will be assigned by reference. If a callback\n   * is provided it will be executed to produce the cloned values. If the\n   * callback returns `undefined` cloning will be handled by the method instead.\n   * The callback is bound to `thisArg` and invoked with one argument; (value).\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to clone.\n   * @param {boolean} [isDeep=false] Specify a deep clone.\n   * @param {Function} [callback] The function to customize cloning values.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {*} Returns the cloned value.\n   * @example\n   *\n   * let characters = [\n   *   { 'name': 'barney', 'age': 36 },\n   *   { 'name': 'fred',   'age': 40 }\n   * ];\n   *\n   * let shallow = _.clone(characters);\n   * shallow[0] === characters[0];\n   * // => true\n   *\n   * let deep = _.clone(characters, true);\n   * deep[0] === characters[0];\n   * // => false\n   *\n   * _.mixin({\n   *   'clone': _.partialRight(_.clone, function(value) {\n   *     return _.isElement(value) ? value.cloneNode(false) : undefined;\n   *   })\n   * });\n   *\n   * let clone = _.clone(document.body);\n   * clone.childNodes.length;\n   * // => 0\n   */\n  function clone(value) {\n    return isObject(value) ? isArray(value) ? slice(value) : assign({}, value) : value;\n  }\n\n  /**\n   * Assigns own enumerable properties of source object(s) to the destination\n   * object for all destination properties that resolve to `undefined`. Once a\n   * property is set, additional defaults of the same property will be ignored.\n   *\n   * @static\n   * @memberOf _\n   * @type Function\n   * @category Objects\n   * @param {Object} object The destination object.\n   * @param {...Object} [source] The source objects.\n   * @param- {Object} [guard] Allows working with `_.reduce` without using its\n   *  `key` and `object` arguments as sources.\n   * @returns {Object} Returns the destination object.\n   * @example\n   *\n   * let object = { 'name': 'barney' };\n   * _.defaults(object, { 'name': 'fred', 'employer': 'slate' });\n   * // => { 'name': 'barney', 'employer': 'slate' }\n   */\n  function defaults(object) {\n    if (!object) {\n      return object;\n    }\n    for (let argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n      let iterable = arguments[argsIndex];\n      if (iterable) {\n        for (let key in iterable) {\n          if (typeof object[key] == 'undefined') {\n            object[key] = iterable[key];\n          }\n        }\n      }\n    }\n    return object;\n  }\n\n  /**\n   * Iterates over own and inherited enumerable properties of an object,\n   * executing the callback for each property. The callback is bound to `thisArg`\n   * and invoked with three arguments; (value, key, object). Callbacks may exit\n   * iteration early by explicitly returning `false`.\n   *\n   * @static\n   * @memberOf _\n   * @type Function\n   * @category Objects\n   * @param {Object} object The object to iterate over.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Object} Returns `object`.\n   * @example\n   *\n   * function Shape() {\n   *   this.x = 0;\n   *   this.y = 0;\n   * }\n   *\n   * Shape.prototype.move = function(x, y) {\n   *   this.x += x;\n   *   this.y += y;\n   * };\n   *\n   * _.forIn(new Shape, function(value, key) {\n   *   console.log(key);\n   * });\n   * // => logs 'x', 'y', and 'move' (property order is not guaranteed across environments)\n   */\n  let forIn = function forIn(collection, callback) {\n    let index,\n        iterable = collection,\n        result = iterable;\n    if (!iterable) return result;\n    if (!objectTypes[typeof iterable === 'undefined' ? 'undefined' : _typeof(iterable)]) return result;\n    for (index in iterable) {\n      if (callback(iterable[index], index, collection) === indicatorObject) return result;\n    }\n    return result;\n  };\n\n  /**\n   * Iterates over own enumerable properties of an object, executing the callback\n   * for each property. The callback is bound to `thisArg` and invoked with three\n   * arguments; (value, key, object). Callbacks may exit iteration early by\n   * explicitly returning `false`.\n   *\n   * @static\n   * @memberOf _\n   * @type Function\n   * @category Objects\n   * @param {Object} object The object to iterate over.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Object} Returns `object`.\n   * @example\n   *\n   * _.forOwn({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {\n   *   console.log(key);\n   * });\n   * // => logs '0', '1', and 'length' (property order is not guaranteed across environments)\n   */\n  let forOwn = function forOwn(collection, callback) {\n    let index,\n        iterable = collection,\n        result = iterable;\n    if (!iterable) return result;\n    if (!objectTypes[typeof iterable === 'undefined' ? 'undefined' : _typeof(iterable)]) return result;\n    for (index in iterable) {\n      if (hasOwnProperty.call(iterable, index)) {\n        if (callback(iterable[index], index, collection) === indicatorObject) return result;\n      }\n    }\n    return result;\n  };\n\n  /**\n   * Creates a sorted array of property names of all enumerable properties,\n   * own and inherited, of `object` that have function values.\n   *\n   * @static\n   * @memberOf _\n   * @alias methods\n   * @category Objects\n   * @param {Object} object The object to inspect.\n   * @returns {Array} Returns an array of property names that have function values.\n   * @example\n   *\n   * _.functions(_);\n   * // => ['all', 'any', 'bind', 'bindAll', 'clone', 'compact', 'compose', ...]\n   */\n  function functions(object) {\n    let result = [];\n    forIn(object, function (value, key) {\n      if (isFunction(value)) {\n        result.push(key);\n      }\n    });\n    return result.sort();\n  }\n\n  /**\n   * Checks if the specified property name exists as a direct property of `object`,\n   * instead of an inherited property.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to inspect.\n   * @param {string} key The name of the property to check.\n   * @returns {boolean} Returns `true` if key is a direct property, else `false`.\n   * @example\n   *\n   * _.has({ 'a': 1, 'b': 2, 'c': 3 }, 'b');\n   * // => true\n   */\n  function has(object, key) {\n    return object ? hasOwnProperty.call(object, key) : false;\n  }\n\n  /**\n   * Creates an object composed of the inverted keys and values of the given object.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to invert.\n   * @returns {Object} Returns the created inverted object.\n   * @example\n   *\n   * _.invert({ 'first': 'fred', 'second': 'barney' });\n   * // => { 'fred': 'first', 'barney': 'second' }\n   */\n  function invert(object) {\n    let index = -1,\n        props = keys(object),\n        length = props.length,\n        result = {};\n\n    while (++index < length) {\n      let key = props[index];\n      result[object[key]] = key;\n    }\n    return result;\n  }\n\n  /**\n   * Checks if `value` is a boolean value.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is a boolean value, else `false`.\n   * @example\n   *\n   * _.isBoolean(null);\n   * // => false\n   */\n  function isBoolean(value) {\n    return value === true || value === false || value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) == 'object' && toString.call(value) == boolClass || false;\n  }\n\n  /**\n   * Checks if `value` is a date.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is a date, else `false`.\n   * @example\n   *\n   * _.isDate(new Date);\n   * // => true\n   */\n  function isDate(value) {\n    return value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) == 'object' && toString.call(value) == dateClass || false;\n  }\n\n  /**\n   * Checks if `value` is a DOM element.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is a DOM element, else `false`.\n   * @example\n   *\n   * _.isElement(document.body);\n   * // => true\n   */\n  function isElement(value) {\n    return value && value.nodeType === 1 || false;\n  }\n\n  /**\n   * Checks if `value` is empty. Arrays, strings, or `arguments` objects with a\n   * length of `0` and objects with no own enumerable properties are considered\n   * \"empty\".\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Array|Object|string} value The value to inspect.\n   * @returns {boolean} Returns `true` if the `value` is empty, else `false`.\n   * @example\n   *\n   * _.isEmpty([1, 2, 3]);\n   * // => false\n   *\n   * _.isEmpty({});\n   * // => true\n   *\n   * _.isEmpty('');\n   * // => true\n   */\n  function isEmpty(value) {\n    if (!value) {\n      return true;\n    }\n    if (isArray(value) || isString(value)) {\n      return !value.length;\n    }\n    for (let key in value) {\n      if (hasOwnProperty.call(value, key)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Performs a deep comparison between two values to determine if they are\n   * equivalent to each other. If a callback is provided it will be executed\n   * to compare values. If the callback returns `undefined` comparisons will\n   * be handled by the method instead. The callback is bound to `thisArg` and\n   * invoked with two arguments; (a, b).\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} a The value to compare.\n   * @param {*} b The other value to compare.\n   * @param {Function} [callback] The function to customize comparing values.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n   * @example\n   *\n   * let object = { 'name': 'fred' };\n   * let copy = { 'name': 'fred' };\n   *\n   * object == copy;\n   * // => false\n   *\n   * _.isEqual(object, copy);\n   * // => true\n   *\n   * let words = ['hello', 'goodbye'];\n   * let otherWords = ['hi', 'goodbye'];\n   *\n   * _.isEqual(words, otherWords, function(a, b) {\n   *   let reGreet = /^(?:hello|hi)$/i,\n   *       aGreet = _.isString(a) && reGreet.test(a),\n   *       bGreet = _.isString(b) && reGreet.test(b);\n   *\n   *   return (aGreet || bGreet) ? (aGreet == bGreet) : undefined;\n   * });\n   * // => true\n   */\n  function isEqual(a, b) {\n    return baseIsEqual(a, b);\n  }\n\n  /**\n   * Checks if `value` is, or can be coerced to, a finite number.\n   *\n   * Note: This is not the same as native `isFinite` which will return true for\n   * booleans and empty strings. See http://es5.github.io/#x15.1.2.5.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is finite, else `false`.\n   * @example\n   *\n   * _.isFinite(-101);\n   * // => true\n   *\n   * _.isFinite('10');\n   * // => true\n   *\n   * _.isFinite(true);\n   * // => false\n   *\n   * _.isFinite('');\n   * // => false\n   *\n   * _.isFinite(Infinity);\n   * // => false\n   */\n  function isFinite(value) {\n    return nativeIsFinite(value) && !nativeIsNaN(parseFloat(value));\n  }\n\n  /**\n   * Checks if `value` is a function.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is a function, else `false`.\n   * @example\n   *\n   * _.isFunction(_);\n   * // => true\n   */\n  function isFunction(value) {\n    return typeof value == 'function';\n  }\n  // fallback for older versions of Chrome and Safari\n  if (isFunction(/x/)) {\n    isFunction = function isFunction(value) {\n      return typeof value == 'function' && toString.call(value) == funcClass;\n    };\n  }\n\n  /**\n   * Checks if `value` is the language type of Object.\n   * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is an object, else `false`.\n   * @example\n   *\n   * _.isObject({});\n   * // => true\n   *\n   * _.isObject([1, 2, 3]);\n   * // => true\n   *\n   * _.isObject(1);\n   * // => false\n   */\n  function isObject(value) {\n    // check if the value is the ECMAScript language type of Object\n    // http://es5.github.io/#x8\n    // and avoid a V8 bug\n    // http://code.google.com/p/v8/issues/detail?id=2291\n    return !!(value && objectTypes[typeof value === 'undefined' ? 'undefined' : _typeof(value)]);\n  }\n\n  /**\n   * Checks if `value` is `NaN`.\n   *\n   * Note: This is not the same as native `isNaN` which will return `true` for\n   * `undefined` and other non-numeric values. See http://es5.github.io/#x15.1.2.4.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is `NaN`, else `false`.\n   * @example\n   *\n   * _.isNaN(NaN);\n   * // => true\n   *\n   * _.isNaN(new Number(NaN));\n   * // => true\n   *\n   * isNaN(undefined);\n   * // => true\n   *\n   * _.isNaN(undefined);\n   * // => false\n   */\n  function isNaN(value) {\n    // `NaN` as a primitive is the only value that is not equal to itself\n    // (perform the [[Class]] check first to avoid errors with some host objects in IE)\n    return isNumber(value) && value != +value;\n  }\n\n  /**\n   * Checks if `value` is `null`.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is `null`, else `false`.\n   * @example\n   *\n   * _.isNull(null);\n   * // => true\n   *\n   * _.isNull(undefined);\n   * // => false\n   */\n  function isNull(value) {\n    return value === null;\n  }\n\n  /**\n   * Checks if `value` is a number.\n   *\n   * Note: `NaN` is considered a number. See http://es5.github.io/#x8.5.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is a number, else `false`.\n   * @example\n   *\n   * _.isNumber(8.4 * 5);\n   * // => true\n   */\n  function isNumber(value) {\n    return typeof value == 'number' || value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) == 'object' && toString.call(value) == numberClass || false;\n  }\n\n  /**\n   * Checks if `value` is a regular expression.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is a regular expression, else `false`.\n   * @example\n   *\n   * _.isRegExp(/fred/);\n   * // => true\n   */\n  function isRegExp(value) {\n    return value && objectTypes[typeof value === 'undefined' ? 'undefined' : _typeof(value)] && toString.call(value) == regexpClass || false;\n  }\n\n  /**\n   * Checks if `value` is a string.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is a string, else `false`.\n   * @example\n   *\n   * _.isString('fred');\n   * // => true\n   */\n  function isString(value) {\n    return typeof value == 'string' || value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) == 'object' && toString.call(value) == stringClass || false;\n  }\n\n  /**\n   * Checks if `value` is `undefined`.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if the `value` is `undefined`, else `false`.\n   * @example\n   *\n   * _.isUndefined(void 0);\n   * // => true\n   */\n  function isUndefined(value) {\n    return typeof value == 'undefined';\n  }\n\n  /**\n   * Creates a shallow clone of `object` excluding the specified properties.\n   * Property names may be specified as individual arguments or as arrays of\n   * property names. If a callback is provided it will be executed for each\n   * property of `object` omitting the properties the callback returns truey\n   * for. The callback is bound to `thisArg` and invoked with three arguments;\n   * (value, key, object).\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The source object.\n   * @param {Function|...string|string[]} [callback] The properties to omit or the\n   *  function called per iteration.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Object} Returns an object without the omitted properties.\n   * @example\n   *\n   * _.omit({ 'name': 'fred', 'age': 40 }, 'age');\n   * // => { 'name': 'fred' }\n   *\n   * _.omit({ 'name': 'fred', 'age': 40 }, function(value) {\n   *   return typeof value == 'number';\n   * });\n   * // => { 'name': 'fred' }\n   */\n  function omit(object) {\n    let props = [];\n    forIn(object, function (value, key) {\n      props.push(key);\n    });\n    props = baseDifference(props, baseFlatten(arguments, true, false, 1));\n\n    let index = -1,\n        length = props.length,\n        result = {};\n\n    while (++index < length) {\n      let key = props[index];\n      result[key] = object[key];\n    }\n    return result;\n  }\n\n  /**\n   * Creates a two dimensional array of an object's key-value pairs,\n   * i.e. `[[key1, value1], [key2, value2]]`.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to inspect.\n   * @returns {Array} Returns new array of key-value pairs.\n   * @example\n   *\n   * _.pairs({ 'barney': 36, 'fred': 40 });\n   * // => [['barney', 36], ['fred', 40]] (property order is not guaranteed across environments)\n   */\n  function pairs(object) {\n    let index = -1,\n        props = keys(object),\n        length = props.length,\n        result = Array(length);\n\n    while (++index < length) {\n      let key = props[index];\n      result[index] = [key, object[key]];\n    }\n    return result;\n  }\n\n  /**\n   * Creates a shallow clone of `object` composed of the specified properties.\n   * Property names may be specified as individual arguments or as arrays of\n   * property names. If a callback is provided it will be executed for each\n   * property of `object` picking the properties the callback returns truey\n   * for. The callback is bound to `thisArg` and invoked with three arguments;\n   * (value, key, object).\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The source object.\n   * @param {Function|...string|string[]} [callback] The function called per\n   *  iteration or property names to pick, specified as individual property\n   *  names or arrays of property names.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Object} Returns an object composed of the picked properties.\n   * @example\n   *\n   * _.pick({ 'name': 'fred', '_userid': 'fred1' }, 'name');\n   * // => { 'name': 'fred' }\n   *\n   * _.pick({ 'name': 'fred', '_userid': 'fred1' }, function(value, key) {\n   *   return key.charAt(0) != '_';\n   * });\n   * // => { 'name': 'fred' }\n   */\n  function pick(object) {\n    let index = -1,\n        props = baseFlatten(arguments, true, false, 1),\n        length = props.length,\n        result = {};\n\n    while (++index < length) {\n      let key = props[index];\n      if (key in object) {\n        result[key] = object[key];\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Creates an array composed of the own enumerable property values of `object`.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to inspect.\n   * @returns {Array} Returns an array of property values.\n   * @example\n   *\n   * _.values({ 'one': 1, 'two': 2, 'three': 3 });\n   * // => [1, 2, 3] (property order is not guaranteed across environments)\n   */\n  function values(object) {\n    let index = -1,\n        props = keys(object),\n        length = props.length,\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = object[props[index]];\n    }\n    return result;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Checks if a given value is present in a collection using strict equality\n   * for comparisons, i.e. `===`. If `fromIndex` is negative, it is used as the\n   * offset from the end of the collection.\n   *\n   * @static\n   * @memberOf _\n   * @alias include\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {*} target The value to check for.\n   * @param {number} [fromIndex=0] The index to search from.\n   * @returns {boolean} Returns `true` if the `target` element is found, else `false`.\n   * @example\n   *\n   * _.contains([1, 2, 3], 1);\n   * // => true\n   *\n   * _.contains([1, 2, 3], 1, 2);\n   * // => false\n   *\n   * _.contains({ 'name': 'fred', 'age': 40 }, 'fred');\n   * // => true\n   *\n   * _.contains('pebbles', 'eb');\n   * // => true\n   */\n  function contains(collection, target) {\n    let indexOf = getIndexOf(),\n        length = collection ? collection.length : 0,\n        result = false;\n    if (length && typeof length == 'number') {\n      result = indexOf(collection, target) > -1;\n    } else {\n      forOwn(collection, function (value) {\n        return (result = value === target) && indicatorObject;\n      });\n    }\n    return result;\n  }\n\n  /**\n   * Creates an object composed of keys generated from the results of running\n   * each element of `collection` through the callback. The corresponding value\n   * of each key is the number of times the key was returned by the callback.\n   * The callback is bound to `thisArg` and invoked with three arguments;\n   * (value, index|key, collection).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Object} Returns the composed aggregate object.\n   * @example\n   *\n   * _.countBy([4.3, 6.1, 6.4], function(num) { return Math.floor(num); });\n   * // => { '4': 1, '6': 2 }\n   *\n   * _.countBy([4.3, 6.1, 6.4], function(num) { return this.floor(num); }, Math);\n   * // => { '4': 1, '6': 2 }\n   *\n   * _.countBy(['one', 'two', 'three'], 'length');\n   * // => { '3': 2, '5': 1 }\n   */\n  let countBy = createAggregator(function (result, value, key) {\n    hasOwnProperty.call(result, key) ? result[key]++ : result[key] = 1;\n  });\n\n  /**\n   * Checks if the given callback returns truey value for **all** elements of\n   * a collection. The callback is bound to `thisArg` and invoked with three\n   * arguments; (value, index|key, collection).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @alias all\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {boolean} Returns `true` if all elements passed the callback check,\n   *  else `false`.\n   * @example\n   *\n   * _.every([true, 1, null, 'yes']);\n   * // => false\n   *\n   * let characters = [\n   *   { 'name': 'barney', 'age': 36 },\n   *   { 'name': 'fred',   'age': 40 }\n   * ];\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.every(characters, 'age');\n   * // => true\n   *\n   * // using \"_.where\" callback shorthand\n   * _.every(characters, { 'age': 36 });\n   * // => false\n   */\n  function every(collection, callback, thisArg) {\n    let result = true;\n    callback = createCallback(callback, thisArg, 3);\n\n    let index = -1,\n        length = collection ? collection.length : 0;\n\n    if (typeof length == 'number') {\n      while (++index < length) {\n        if (!(result = !!callback(collection[index], index, collection))) {\n          break;\n        }\n      }\n    } else {\n      forOwn(collection, function (value, index, collection) {\n        return !(result = !!callback(value, index, collection)) && indicatorObject;\n      });\n    }\n    return result;\n  }\n\n  /**\n   * Iterates over elements of a collection, returning an array of all elements\n   * the callback returns truey for. The callback is bound to `thisArg` and\n   * invoked with three arguments; (value, index|key, collection).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @alias select\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Array} Returns a new array of elements that passed the callback check.\n   * @example\n   *\n   * let evens = _.filter([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });\n   * // => [2, 4, 6]\n   *\n   * let characters = [\n   *   { 'name': 'barney', 'age': 36, 'blocked': false },\n   *   { 'name': 'fred',   'age': 40, 'blocked': true }\n   * ];\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.filter(characters, 'blocked');\n   * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]\n   *\n   * // using \"_.where\" callback shorthand\n   * _.filter(characters, { 'age': 36 });\n   * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]\n   */\n  function filter(collection, callback, thisArg) {\n    let result = [];\n    callback = createCallback(callback, thisArg, 3);\n\n    let index = -1,\n        length = collection ? collection.length : 0;\n\n    if (typeof length == 'number') {\n      while (++index < length) {\n        let value = collection[index];\n        if (callback(value, index, collection)) {\n          result.push(value);\n        }\n      }\n    } else {\n      forOwn(collection, function (value, index, collection) {\n        if (callback(value, index, collection)) {\n          result.push(value);\n        }\n      });\n    }\n    return result;\n  }\n\n  /**\n   * Iterates over elements of a collection, returning the first element that\n   * the callback returns truey for. The callback is bound to `thisArg` and\n   * invoked with three arguments; (value, index|key, collection).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @alias detect, findWhere\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {*} Returns the found element, else `undefined`.\n   * @example\n   *\n   * let characters = [\n   *   { 'name': 'barney',  'age': 36, 'blocked': false },\n   *   { 'name': 'fred',    'age': 40, 'blocked': true },\n   *   { 'name': 'pebbles', 'age': 1,  'blocked': false }\n   * ];\n   *\n   * _.find(characters, function(chr) {\n   *   return chr.age < 40;\n   * });\n   * // => { 'name': 'barney', 'age': 36, 'blocked': false }\n   *\n   * // using \"_.where\" callback shorthand\n   * _.find(characters, { 'age': 1 });\n   * // =>  { 'name': 'pebbles', 'age': 1, 'blocked': false }\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.find(characters, 'blocked');\n   * // => { 'name': 'fred', 'age': 40, 'blocked': true }\n   */\n  function find(collection, callback, thisArg) {\n    callback = createCallback(callback, thisArg, 3);\n\n    let index = -1,\n        length = collection ? collection.length : 0;\n\n    if (typeof length == 'number') {\n      while (++index < length) {\n        let value = collection[index];\n        if (callback(value, index, collection)) {\n          return value;\n        }\n      }\n    } else {\n      let result;\n      forOwn(collection, function (value, index, collection) {\n        if (callback(value, index, collection)) {\n          result = value;\n          return indicatorObject;\n        }\n      });\n      return result;\n    }\n  }\n\n  /**\n   * Examines each element in a `collection`, returning the first that\n   * has the given properties. When checking `properties`, this method\n   * performs a deep comparison between values to determine if they are\n   * equivalent to each other.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Object} properties The object of property values to filter by.\n   * @returns {*} Returns the found element, else `undefined`.\n   * @example\n   *\n   * let food = [\n   *   { 'name': 'apple',  'organic': false, 'type': 'fruit' },\n   *   { 'name': 'banana', 'organic': true,  'type': 'fruit' },\n   *   { 'name': 'beet',   'organic': false, 'type': 'vegetable' }\n   * ];\n   *\n   * _.findWhere(food, { 'type': 'vegetable' });\n   * // => { 'name': 'beet', 'organic': false, 'type': 'vegetable' }\n   */\n  function findWhere(object, properties) {\n    return where(object, properties, true);\n  }\n\n  /**\n   * Iterates over elements of a collection, executing the callback for each\n   * element. The callback is bound to `thisArg` and invoked with three arguments;\n   * (value, index|key, collection). Callbacks may exit iteration early by\n   * explicitly returning `false`.\n   *\n   * Note: As with other \"Collections\" methods, objects with a `length` property\n   * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`\n   * may be used for object iteration.\n   *\n   * @static\n   * @memberOf _\n   * @alias each\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Array|Object|string} Returns `collection`.\n   * @example\n   *\n   * _([1, 2, 3]).forEach(function(num) { console.log(num); }).join(',');\n   * // => logs each number and returns '1,2,3'\n   *\n   * _.forEach({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { console.log(num); });\n   * // => logs each number and returns the object (property order is not guaranteed across environments)\n   */\n  function forEach(collection, callback, thisArg) {\n    let index = -1,\n        length = collection ? collection.length : 0;\n\n    callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n    if (typeof length == 'number') {\n      while (++index < length) {\n        if (callback(collection[index], index, collection) === indicatorObject) {\n          break;\n        }\n      }\n    } else {\n      forOwn(collection, callback);\n    }\n  }\n\n  /**\n   * This method is like `_.forEach` except that it iterates over elements\n   * of a `collection` from right to left.\n   *\n   * @static\n   * @memberOf _\n   * @alias eachRight\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Array|Object|string} Returns `collection`.\n   * @example\n   *\n   * _([1, 2, 3]).forEachRight(function(num) { console.log(num); }).join(',');\n   * // => logs each number from right to left and returns '3,2,1'\n   */\n  function forEachRight(collection, callback) {\n    let length = collection ? collection.length : 0;\n    if (typeof length == 'number') {\n      while (length--) {\n        if (callback(collection[length], length, collection) === false) {\n          break;\n        }\n      }\n    } else {\n      let props = keys(collection);\n      length = props.length;\n      forOwn(collection, function (value, key, collection) {\n        key = props ? props[--length] : --length;\n        return callback(collection[key], key, collection) === false && indicatorObject;\n      });\n    }\n  }\n\n  /**\n   * Creates an object composed of keys generated from the results of running\n   * each element of a collection through the callback. The corresponding value\n   * of each key is an array of the elements responsible for generating the key.\n   * The callback is bound to `thisArg` and invoked with three arguments;\n   * (value, index|key, collection).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Object} Returns the composed aggregate object.\n   * @example\n   *\n   * _.groupBy([4.2, 6.1, 6.4], function(num) { return Math.floor(num); });\n   * // => { '4': [4.2], '6': [6.1, 6.4] }\n   *\n   * _.groupBy([4.2, 6.1, 6.4], function(num) { return this.floor(num); }, Math);\n   * // => { '4': [4.2], '6': [6.1, 6.4] }\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.groupBy(['one', 'two', 'three'], 'length');\n   * // => { '3': ['one', 'two'], '5': ['three'] }\n   */\n  let groupBy = createAggregator(function (result, value, key) {\n    (hasOwnProperty.call(result, key) ? result[key] : result[key] = []).push(value);\n  });\n\n  /**\n   * Creates an object composed of keys generated from the results of running\n   * each element of the collection through the given callback. The corresponding\n   * value of each key is the last element responsible for generating the key.\n   * The callback is bound to `thisArg` and invoked with three arguments;\n   * (value, index|key, collection).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Object} Returns the composed aggregate object.\n   * @example\n   *\n   * let keys = [\n   *   { 'dir': 'left', 'code': 97 },\n   *   { 'dir': 'right', 'code': 100 }\n   * ];\n   *\n   * _.indexBy(keys, 'dir');\n   * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n   *\n   * _.indexBy(keys, function(key) { return String.fromCharCode(key.code); });\n   * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n   *\n   * _.indexBy(characters, function(key) { this.fromCharCode(key.code); }, String);\n   * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n   */\n  let indexBy = createAggregator(function (result, value, key) {\n    result[key] = value;\n  });\n\n  /**\n   * Invokes the method named by `methodName` on each element in the `collection`\n   * returning an array of the results of each invoked method. Additional arguments\n   * will be provided to each invoked method. If `methodName` is a function it\n   * will be invoked for, and `this` bound to, each element in the `collection`.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|string} methodName The name of the method to invoke or\n   *  the function invoked per iteration.\n   * @param {...*} [arg] Arguments to invoke the method with.\n   * @returns {Array} Returns a new array of the results of each invoked method.\n   * @example\n   *\n   * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');\n   * // => [[1, 5, 7], [1, 2, 3]]\n   *\n   * _.invoke([123, 456], String.prototype.split, '');\n   * // => [['1', '2', '3'], ['4', '5', '6']]\n   */\n  function invoke(collection, methodName) {\n    let args = slice(arguments, 2),\n        index = -1,\n        isFunc = typeof methodName == 'function',\n        length = collection ? collection.length : 0,\n        result = Array(typeof length == 'number' ? length : 0);\n\n    forEach(collection, function (value) {\n      result[++index] = (isFunc ? methodName : value[methodName]).apply(value, args);\n    });\n    return result;\n  }\n\n  /**\n   * Creates an array of values by running each element in the collection\n   * through the callback. The callback is bound to `thisArg` and invoked with\n   * three arguments; (value, index|key, collection).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @alias collect\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Array} Returns a new array of the results of each `callback` execution.\n   * @example\n   *\n   * _.map([1, 2, 3], function(num) { return num * 3; });\n   * // => [3, 6, 9]\n   *\n   * _.map({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { return num * 3; });\n   * // => [3, 6, 9] (property order is not guaranteed across environments)\n   *\n   * let characters = [\n   *   { 'name': 'barney', 'age': 36 },\n   *   { 'name': 'fred',   'age': 40 }\n   * ];\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.map(characters, 'name');\n   * // => ['barney', 'fred']\n   */\n  function map(collection, callback, thisArg) {\n    let index = -1,\n        length = collection ? collection.length : 0;\n\n    callback = createCallback(callback, thisArg, 3);\n    if (typeof length == 'number') {\n      let result = Array(length);\n      while (++index < length) {\n        result[index] = callback(collection[index], index, collection);\n      }\n    } else {\n      result = [];\n      forOwn(collection, function (value, key, collection) {\n        result[++index] = callback(value, key, collection);\n      });\n    }\n    return result;\n  }\n\n  /**\n   * Retrieves the maximum value of a collection. If the collection is empty or\n   * falsey `-Infinity` is returned. If a callback is provided it will be executed\n   * for each value in the collection to generate the criterion by which the value\n   * is ranked. The callback is bound to `thisArg` and invoked with three\n   * arguments; (value, index, collection).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {*} Returns the maximum value.\n   * @example\n   *\n   * _.max([4, 2, 8, 6]);\n   * // => 8\n   *\n   * let characters = [\n   *   { 'name': 'barney', 'age': 36 },\n   *   { 'name': 'fred',   'age': 40 }\n   * ];\n   *\n   * _.max(characters, function(chr) { return chr.age; });\n   * // => { 'name': 'fred', 'age': 40 };\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.max(characters, 'age');\n   * // => { 'name': 'fred', 'age': 40 };\n   */\n  function max(collection, callback, thisArg) {\n    let computed = -Infinity,\n        result = computed;\n\n    // allows working with functions like `_.map` without using\n    // their `index` argument as a callback\n    if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {\n      callback = null;\n    }\n    let index = -1,\n        length = collection ? collection.length : 0;\n\n    if (callback == null && typeof length == 'number') {\n      while (++index < length) {\n        let value = collection[index];\n        if (value > result) {\n          result = value;\n        }\n      }\n    } else {\n      callback = createCallback(callback, thisArg, 3);\n\n      forEach(collection, function (value, index, collection) {\n        let current = callback(value, index, collection);\n        if (current > computed) {\n          computed = current;\n          result = value;\n        }\n      });\n    }\n    return result;\n  }\n\n  /**\n   * Retrieves the minimum value of a collection. If the collection is empty or\n   * falsey `Infinity` is returned. If a callback is provided it will be executed\n   * for each value in the collection to generate the criterion by which the value\n   * is ranked. The callback is bound to `thisArg` and invoked with three\n   * arguments; (value, index, collection).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {*} Returns the minimum value.\n   * @example\n   *\n   * _.min([4, 2, 8, 6]);\n   * // => 2\n   *\n   * let characters = [\n   *   { 'name': 'barney', 'age': 36 },\n   *   { 'name': 'fred',   'age': 40 }\n   * ];\n   *\n   * _.min(characters, function(chr) { return chr.age; });\n   * // => { 'name': 'barney', 'age': 36 };\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.min(characters, 'age');\n   * // => { 'name': 'barney', 'age': 36 };\n   */\n  function min(collection, callback, thisArg) {\n    let computed = Infinity,\n        result = computed;\n\n    // allows working with functions like `_.map` without using\n    // their `index` argument as a callback\n    if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {\n      callback = null;\n    }\n    let index = -1,\n        length = collection ? collection.length : 0;\n\n    if (callback == null && typeof length == 'number') {\n      while (++index < length) {\n        let value = collection[index];\n        if (value < result) {\n          result = value;\n        }\n      }\n    } else {\n      callback = createCallback(callback, thisArg, 3);\n\n      forEach(collection, function (value, index, collection) {\n        let current = callback(value, index, collection);\n        if (current < computed) {\n          computed = current;\n          result = value;\n        }\n      });\n    }\n    return result;\n  }\n\n  /**\n   * Retrieves the value of a specified property from all elements in the collection.\n   *\n   * @static\n   * @memberOf _\n   * @type Function\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {string} property The name of the property to pluck.\n   * @returns {Array} Returns a new array of property values.\n   * @example\n   *\n   * var characters = [\n   *   { 'name': 'barney', 'age': 36 },\n   *   { 'name': 'fred',   'age': 40 }\n   * ];\n   *\n   * _.pluck(characters, 'name');\n   * // => ['barney', 'fred']\n   */\n  var pluck = map;\n\n  /**\n   * Reduces a collection to a value which is the accumulated result of running\n   * each element in the collection through the callback, where each successive\n   * callback execution consumes the return value of the previous execution. If\n   * `accumulator` is not provided the first element of the collection will be\n   * used as the initial `accumulator` value. The callback is bound to `thisArg`\n   * and invoked with four arguments; (accumulator, value, index|key, collection).\n   *\n   * @static\n   * @memberOf _\n   * @alias foldl, inject\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {*} [accumulator] Initial value of the accumulator.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {*} Returns the accumulated value.\n   * @example\n   *\n   * var sum = _.reduce([1, 2, 3], function(sum, num) {\n   *   return sum + num;\n   * });\n   * // => 6\n   *\n   * var mapped = _.reduce({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {\n   *   result[key] = num * 3;\n   *   return result;\n   * }, {});\n   * // => { 'a': 3, 'b': 6, 'c': 9 }\n   */\n  function reduce(collection, callback, accumulator, thisArg) {\n    if (!collection) return accumulator;\n    var noaccum = arguments.length < 3;\n    callback = createCallback(callback, thisArg, 4);\n\n    var index = -1,\n        length = collection.length;\n\n    if (typeof length == 'number') {\n      if (noaccum) {\n        accumulator = collection[++index];\n      }\n      while (++index < length) {\n        accumulator = callback(accumulator, collection[index], index, collection);\n      }\n    } else {\n      forOwn(collection, function (value, index, collection) {\n        accumulator = noaccum ? (noaccum = false, value) : callback(accumulator, value, index, collection);\n      });\n    }\n    return accumulator;\n  }\n\n  /**\n   * This method is like `_.reduce` except that it iterates over elements\n   * of a `collection` from right to left.\n   *\n   * @static\n   * @memberOf _\n   * @alias foldr\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {*} [accumulator] Initial value of the accumulator.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {*} Returns the accumulated value.\n   * @example\n   *\n   * var list = [[0, 1], [2, 3], [4, 5]];\n   * var flat = _.reduceRight(list, function(a, b) { return a.concat(b); }, []);\n   * // => [4, 5, 2, 3, 0, 1]\n   */\n  function reduceRight(collection, callback, accumulator, thisArg) {\n    var noaccum = arguments.length < 3;\n    callback = createCallback(callback, thisArg, 4);\n    forEachRight(collection, function (value, index, collection) {\n      accumulator = noaccum ? (noaccum = false, value) : callback(accumulator, value, index, collection);\n    });\n    return accumulator;\n  }\n\n  /**\n   * The opposite of `_.filter` this method returns the elements of a\n   * collection that the callback does **not** return truey for.\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Array} Returns a new array of elements that failed the callback check.\n   * @example\n   *\n   * var odds = _.reject([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });\n   * // => [1, 3, 5]\n   *\n   * var characters = [\n   *   { 'name': 'barney', 'age': 36, 'blocked': false },\n   *   { 'name': 'fred',   'age': 40, 'blocked': true }\n   * ];\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.reject(characters, 'blocked');\n   * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]\n   *\n   * // using \"_.where\" callback shorthand\n   * _.reject(characters, { 'age': 36 });\n   * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]\n   */\n  function reject(collection, callback, thisArg) {\n    callback = createCallback(callback, thisArg, 3);\n    return filter(collection, function (value, index, collection) {\n      return !callback(value, index, collection);\n    });\n  }\n\n  /**\n   * Retrieves a random element or `n` random elements from a collection.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to sample.\n   * @param {number} [n] The number of elements to sample.\n   * @param- {Object} [guard] Allows working with functions like `_.map`\n   *  without using their `index` arguments as `n`.\n   * @returns {Array} Returns the random sample(s) of `collection`.\n   * @example\n   *\n   * _.sample([1, 2, 3, 4]);\n   * // => 2\n   *\n   * _.sample([1, 2, 3, 4], 2);\n   * // => [3, 1]\n   */\n  function sample(collection, n, guard) {\n    if (collection && typeof collection.length != 'number') {\n      collection = values(collection);\n    }\n    if (n == null || guard) {\n      return collection ? collection[baseRandom(0, collection.length - 1)] : undefined;\n    }\n    var result = shuffle(collection);\n    result.length = nativeMin(nativeMax(0, n), result.length);\n    return result;\n  }\n\n  /**\n   * Creates an array of shuffled values, using a version of the Fisher-Yates\n   * shuffle. See http://en.wikipedia.org/wiki/Fisher-Yates_shuffle.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to shuffle.\n   * @returns {Array} Returns a new shuffled collection.\n   * @example\n   *\n   * _.shuffle([1, 2, 3, 4, 5, 6]);\n   * // => [4, 1, 6, 3, 5, 2]\n   */\n  function shuffle(collection) {\n    var index = -1,\n        length = collection ? collection.length : 0,\n        result = Array(typeof length == 'number' ? length : 0);\n\n    forEach(collection, function (value) {\n      var rand = baseRandom(0, ++index);\n      result[index] = result[rand];\n      result[rand] = value;\n    });\n    return result;\n  }\n\n  /**\n   * Gets the size of the `collection` by returning `collection.length` for arrays\n   * and array-like objects or the number of own enumerable properties for objects.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to inspect.\n   * @returns {number} Returns `collection.length` or number of own enumerable properties.\n   * @example\n   *\n   * _.size([1, 2]);\n   * // => 2\n   *\n   * _.size({ 'one': 1, 'two': 2, 'three': 3 });\n   * // => 3\n   *\n   * _.size('pebbles');\n   * // => 7\n   */\n  function size(collection) {\n    var length = collection ? collection.length : 0;\n    return typeof length == 'number' ? length : keys(collection).length;\n  }\n\n  /**\n   * Checks if the callback returns a truey value for **any** element of a\n   * collection. The function returns as soon as it finds a passing value and\n   * does not iterate over the entire collection. The callback is bound to\n   * `thisArg` and invoked with three arguments; (value, index|key, collection).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @alias any\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {boolean} Returns `true` if any element passed the callback check,\n   *  else `false`.\n   * @example\n   *\n   * _.some([null, 0, 'yes', false], Boolean);\n   * // => true\n   *\n   * var characters = [\n   *   { 'name': 'barney', 'age': 36, 'blocked': false },\n   *   { 'name': 'fred',   'age': 40, 'blocked': true }\n   * ];\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.some(characters, 'blocked');\n   * // => true\n   *\n   * // using \"_.where\" callback shorthand\n   * _.some(characters, { 'age': 1 });\n   * // => false\n   */\n  function some(collection, callback, thisArg) {\n    var result;\n    callback = createCallback(callback, thisArg, 3);\n\n    var index = -1,\n        length = collection ? collection.length : 0;\n\n    if (typeof length == 'number') {\n      while (++index < length) {\n        if (result = callback(collection[index], index, collection)) {\n          break;\n        }\n      }\n    } else {\n      forOwn(collection, function (value, index, collection) {\n        return (result = callback(value, index, collection)) && indicatorObject;\n      });\n    }\n    return !!result;\n  }\n\n  /**\n   * Creates an array of elements, sorted in ascending order by the results of\n   * running each element in a collection through the callback. This method\n   * performs a stable sort, that is, it will preserve the original sort order\n   * of equal elements. The callback is bound to `thisArg` and invoked with\n   * three arguments; (value, index|key, collection).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an array of property names is provided for `callback` the collection\n   * will be sorted by each property value.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Array|Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Array} Returns a new array of sorted elements.\n   * @example\n   *\n   * _.sortBy([1, 2, 3], function(num) { return Math.sin(num); });\n   * // => [3, 1, 2]\n   *\n   * _.sortBy([1, 2, 3], function(num) { return this.sin(num); }, Math);\n   * // => [3, 1, 2]\n   *\n   * var characters = [\n   *   { 'name': 'barney',  'age': 36 },\n   *   { 'name': 'fred',    'age': 40 },\n   *   { 'name': 'barney',  'age': 26 },\n   *   { 'name': 'fred',    'age': 30 }\n   * ];\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.map(_.sortBy(characters, 'age'), _.values);\n   * // => [['barney', 26], ['fred', 30], ['barney', 36], ['fred', 40]]\n   *\n   * // sorting by multiple properties\n   * _.map(_.sortBy(characters, ['name', 'age']), _.values);\n   * // = > [['barney', 26], ['barney', 36], ['fred', 30], ['fred', 40]]\n   */\n  function sortBy(collection, callback, thisArg) {\n    var index = -1,\n        length = collection ? collection.length : 0,\n        result = Array(typeof length == 'number' ? length : 0);\n\n    callback = createCallback(callback, thisArg, 3);\n    forEach(collection, function (value, key, collection) {\n      result[++index] = {\n        'criteria': [callback(value, key, collection)],\n        'index': index,\n        'value': value\n      };\n    });\n\n    length = result.length;\n    result.sort(compareAscending);\n    while (length--) {\n      result[length] = result[length].value;\n    }\n    return result;\n  }\n\n  /**\n   * Converts the `collection` to an array.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to convert.\n   * @returns {Array} Returns the new converted array.\n   * @example\n   *\n   * (function() { return _.toArray(arguments).slice(1); })(1, 2, 3, 4);\n   * // => [2, 3, 4]\n   */\n  function toArray(collection) {\n    if (isArray(collection)) {\n      return slice(collection);\n    }\n    if (collection && typeof collection.length == 'number') {\n      return map(collection);\n    }\n    return values(collection);\n  }\n\n  /**\n   * Performs a deep comparison of each element in a `collection` to the given\n   * `properties` object, returning an array of all elements that have equivalent\n   * property values.\n   *\n   * @static\n   * @memberOf _\n   * @type Function\n   * @category Collections\n   * @param {Array|Object|string} collection The collection to iterate over.\n   * @param {Object} props The object of property values to filter by.\n   * @returns {Array} Returns a new array of elements that have the given properties.\n   * @example\n   *\n   * var characters = [\n   *   { 'name': 'barney', 'age': 36, 'pets': ['hoppy'] },\n   *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }\n   * ];\n   *\n   * _.where(characters, { 'age': 36 });\n   * // => [{ 'name': 'barney', 'age': 36, 'pets': ['hoppy'] }]\n   *\n   * _.where(characters, { 'pets': ['dino'] });\n   * // => [{ 'name': 'fred', 'age': 40, 'pets': ['baby puss', 'dino'] }]\n   */\n  function where(collection, properties, first) {\n    return first && isEmpty(properties) ? undefined : (first ? find : filter)(collection, properties);\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates an array with all falsey values removed. The values `false`, `null`,\n   * `0`, `\"\"`, `undefined`, and `NaN` are all falsey.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to compact.\n   * @returns {Array} Returns a new array of filtered values.\n   * @example\n   *\n   * _.compact([0, 1, false, 2, '', 3]);\n   * // => [1, 2, 3]\n   */\n  function compact(array) {\n    var index = -1,\n        length = array ? array.length : 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (value) {\n        result.push(value);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Creates an array excluding all values of the provided arrays using strict\n   * equality for comparisons, i.e. `===`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to process.\n   * @param {...Array} [values] The arrays of values to exclude.\n   * @returns {Array} Returns a new array of filtered values.\n   * @example\n   *\n   * _.difference([1, 2, 3, 4, 5], [5, 2, 10]);\n   * // => [1, 3, 4]\n   */\n  function difference(array) {\n    return baseDifference(array, baseFlatten(arguments, true, true, 1));\n  }\n\n  /**\n   * Gets the first element or first `n` elements of an array. If a callback\n   * is provided elements at the beginning of the array are returned as long\n   * as the callback returns truey. The callback is bound to `thisArg` and\n   * invoked with three arguments; (value, index, array).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @alias head, take\n   * @category Arrays\n   * @param {Array} array The array to query.\n   * @param {Function|Object|number|string} [callback] The function called\n   *  per element or the number of elements to return. If a property name or\n   *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n   *  style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {*} Returns the first element(s) of `array`.\n   * @example\n   *\n   * _.first([1, 2, 3]);\n   * // => 1\n   *\n   * _.first([1, 2, 3], 2);\n   * // => [1, 2]\n   *\n   * _.first([1, 2, 3], function(num) {\n   *   return num < 3;\n   * });\n   * // => [1, 2]\n   *\n   * var characters = [\n   *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },\n   *   { 'name': 'fred',    'blocked': false, 'employer': 'slate' },\n   *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }\n   * ];\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.first(characters, 'blocked');\n   * // => [{ 'name': 'barney', 'blocked': true, 'employer': 'slate' }]\n   *\n   * // using \"_.where\" callback shorthand\n   * _.pluck(_.first(characters, { 'employer': 'slate' }), 'name');\n   * // => ['barney', 'fred']\n   */\n  function first(array, callback, thisArg) {\n    var n = 0,\n        length = array ? array.length : 0;\n\n    if (typeof callback != 'number' && callback != null) {\n      var index = -1;\n      callback = createCallback(callback, thisArg, 3);\n      while (++index < length && callback(array[index], index, array)) {\n        n++;\n      }\n    } else {\n      n = callback;\n      if (n == null || thisArg) {\n        return array ? array[0] : undefined;\n      }\n    }\n    return slice(array, 0, nativeMin(nativeMax(0, n), length));\n  }\n\n  /**\n   * Flattens a nested array (the nesting can be to any depth). If `isShallow`\n   * is truey, the array will only be flattened a single level. If a callback\n   * is provided each element of the array is passed through the callback before\n   * flattening. The callback is bound to `thisArg` and invoked with three\n   * arguments; (value, index, array).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to flatten.\n   * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Array} Returns a new flattened array.\n   * @example\n   *\n   * _.flatten([1, [2], [3, [[4]]]]);\n   * // => [1, 2, 3, 4];\n   *\n   * _.flatten([1, [2], [3, [[4]]]], true);\n   * // => [1, 2, 3, [[4]]];\n   *\n   * var characters = [\n   *   { 'name': 'barney', 'age': 30, 'pets': ['hoppy'] },\n   *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }\n   * ];\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.flatten(characters, 'pets');\n   * // => ['hoppy', 'baby puss', 'dino']\n   */\n  function flatten(array, isShallow) {\n    return baseFlatten(array, isShallow);\n  }\n\n  /**\n   * Gets the index at which the first occurrence of `value` is found using\n   * strict equality for comparisons, i.e. `===`. If the array is already sorted\n   * providing `true` for `fromIndex` will run a faster binary search.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to search.\n   * @param {*} value The value to search for.\n   * @param {boolean|number} [fromIndex=0] The index to search from or `true`\n   *  to perform a binary search on a sorted array.\n   * @returns {number} Returns the index of the matched value or `-1`.\n   * @example\n   *\n   * _.indexOf([1, 2, 3, 1, 2, 3], 2);\n   * // => 1\n   *\n   * _.indexOf([1, 2, 3, 1, 2, 3], 2, 3);\n   * // => 4\n   *\n   * _.indexOf([1, 1, 2, 2, 3, 3], 2, true);\n   * // => 2\n   */\n  function indexOf(array, value, fromIndex) {\n    if (typeof fromIndex == 'number') {\n      var length = array ? array.length : 0;\n      fromIndex = fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex || 0;\n    } else if (fromIndex) {\n      var index = sortedIndex(array, value);\n      return array[index] === value ? index : -1;\n    }\n    return baseIndexOf(array, value, fromIndex);\n  }\n\n  /**\n   * Gets all but the last element or last `n` elements of an array. If a\n   * callback is provided elements at the end of the array are excluded from\n   * the result as long as the callback returns truey. The callback is bound\n   * to `thisArg` and invoked with three arguments; (value, index, array).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to query.\n   * @param {Function|Object|number|string} [callback=1] The function called\n   *  per element or the number of elements to exclude. If a property name or\n   *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n   *  style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Array} Returns a slice of `array`.\n   * @example\n   *\n   * _.initial([1, 2, 3]);\n   * // => [1, 2]\n   *\n   * _.initial([1, 2, 3], 2);\n   * // => [1]\n   *\n   * _.initial([1, 2, 3], function(num) {\n   *   return num > 1;\n   * });\n   * // => [1]\n   *\n   * var characters = [\n   *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },\n   *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },\n   *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }\n   * ];\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.initial(characters, 'blocked');\n   * // => [{ 'name': 'barney',  'blocked': false, 'employer': 'slate' }]\n   *\n   * // using \"_.where\" callback shorthand\n   * _.pluck(_.initial(characters, { 'employer': 'na' }), 'name');\n   * // => ['barney', 'fred']\n   */\n  function initial(array, callback, thisArg) {\n    var n = 0,\n        length = array ? array.length : 0;\n\n    if (typeof callback != 'number' && callback != null) {\n      var index = length;\n      callback = createCallback(callback, thisArg, 3);\n      while (index-- && callback(array[index], index, array)) {\n        n++;\n      }\n    } else {\n      n = callback == null || thisArg ? 1 : callback || n;\n    }\n    return slice(array, 0, nativeMin(nativeMax(0, length - n), length));\n  }\n\n  /**\n   * Creates an array of unique values present in all provided arrays using\n   * strict equality for comparisons, i.e. `===`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {...Array} [array] The arrays to inspect.\n   * @returns {Array} Returns an array of shared values.\n   * @example\n   *\n   * _.intersection([1, 2, 3], [5, 2, 1, 4], [2, 1]);\n   * // => [1, 2]\n   */\n  function intersection() {\n    var args = [],\n        argsIndex = -1,\n        argsLength = arguments.length;\n\n    while (++argsIndex < argsLength) {\n      var value = arguments[argsIndex];\n      if (isArray(value) || isArguments(value)) {\n        args.push(value);\n      }\n    }\n    var array = args[0],\n        index = -1,\n        indexOf = getIndexOf(),\n        length = array ? array.length : 0,\n        result = [];\n\n    outer: while (++index < length) {\n      value = array[index];\n      if (indexOf(result, value) < 0) {\n        var argsIndex = argsLength;\n        while (--argsIndex) {\n          if (indexOf(args[argsIndex], value) < 0) {\n            continue outer;\n          }\n        }\n        result.push(value);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Gets the last element or last `n` elements of an array. If a callback is\n   * provided elements at the end of the array are returned as long as the\n   * callback returns truey. The callback is bound to `thisArg` and invoked\n   * with three arguments; (value, index, array).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to query.\n   * @param {Function|Object|number|string} [callback] The function called\n   *  per element or the number of elements to return. If a property name or\n   *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n   *  style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {*} Returns the last element(s) of `array`.\n   * @example\n   *\n   * _.last([1, 2, 3]);\n   * // => 3\n   *\n   * _.last([1, 2, 3], 2);\n   * // => [2, 3]\n   *\n   * _.last([1, 2, 3], function(num) {\n   *   return num > 1;\n   * });\n   * // => [2, 3]\n   *\n   * var characters = [\n   *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },\n   *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },\n   *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }\n   * ];\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.pluck(_.last(characters, 'blocked'), 'name');\n   * // => ['fred', 'pebbles']\n   *\n   * // using \"_.where\" callback shorthand\n   * _.last(characters, { 'employer': 'na' });\n   * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]\n   */\n  function last(array, callback, thisArg) {\n    var n = 0,\n        length = array ? array.length : 0;\n\n    if (typeof callback != 'number' && callback != null) {\n      var index = length;\n      callback = createCallback(callback, thisArg, 3);\n      while (index-- && callback(array[index], index, array)) {\n        n++;\n      }\n    } else {\n      n = callback;\n      if (n == null || thisArg) {\n        return array ? array[length - 1] : undefined;\n      }\n    }\n    return slice(array, nativeMax(0, length - n));\n  }\n\n  /**\n   * Gets the index at which the last occurrence of `value` is found using strict\n   * equality for comparisons, i.e. `===`. If `fromIndex` is negative, it is used\n   * as the offset from the end of the collection.\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to search.\n   * @param {*} value The value to search for.\n   * @param {number} [fromIndex=array.length-1] The index to search from.\n   * @returns {number} Returns the index of the matched value or `-1`.\n   * @example\n   *\n   * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2);\n   * // => 4\n   *\n   * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2, 3);\n   * // => 1\n   */\n  function lastIndexOf(array, value, fromIndex) {\n    var index = array ? array.length : 0;\n    if (typeof fromIndex == 'number') {\n      index = (fromIndex < 0 ? nativeMax(0, index + fromIndex) : nativeMin(fromIndex, index - 1)) + 1;\n    }\n    while (index--) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Creates an array of numbers (positive and/or negative) progressing from\n   * `start` up to but not including `end`. If `start` is less than `stop` a\n   * zero-length range is created unless a negative `step` is specified.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {number} [start=0] The start of the range.\n   * @param {number} end The end of the range.\n   * @param {number} [step=1] The value to increment or decrement by.\n   * @returns {Array} Returns a new range array.\n   * @example\n   *\n   * _.range(4);\n   * // => [0, 1, 2, 3]\n   *\n   * _.range(1, 5);\n   * // => [1, 2, 3, 4]\n   *\n   * _.range(0, 20, 5);\n   * // => [0, 5, 10, 15]\n   *\n   * _.range(0, -4, -1);\n   * // => [0, -1, -2, -3]\n   *\n   * _.range(1, 4, 0);\n   * // => [1, 1, 1]\n   *\n   * _.range(0);\n   * // => []\n   */\n  function range(start, end, step) {\n    start = +start || 0;\n    step = +step || 1;\n\n    if (end == null) {\n      end = start;\n      start = 0;\n    }\n    // use `Array(length)` so engines like Chakra and V8 avoid slower modes\n    // http://youtu.be/XAqIpGU8ZZk#t=17m25s\n    var index = -1,\n        length = nativeMax(0, ceil((end - start) / step)),\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = start;\n      start += step;\n    }\n    return result;\n  }\n\n  /**\n   * The opposite of `_.initial` this method gets all but the first element or\n   * first `n` elements of an array. If a callback function is provided elements\n   * at the beginning of the array are excluded from the result as long as the\n   * callback returns truey. The callback is bound to `thisArg` and invoked\n   * with three arguments; (value, index, array).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @alias drop, tail\n   * @category Arrays\n   * @param {Array} array The array to query.\n   * @param {Function|Object|number|string} [callback=1] The function called\n   *  per element or the number of elements to exclude. If a property name or\n   *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n   *  style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Array} Returns a slice of `array`.\n   * @example\n   *\n   * _.rest([1, 2, 3]);\n   * // => [2, 3]\n   *\n   * _.rest([1, 2, 3], 2);\n   * // => [3]\n   *\n   * _.rest([1, 2, 3], function(num) {\n   *   return num < 3;\n   * });\n   * // => [3]\n   *\n   * var characters = [\n   *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },\n   *   { 'name': 'fred',    'blocked': false,  'employer': 'slate' },\n   *   { 'name': 'pebbles', 'blocked': true, 'employer': 'na' }\n   * ];\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.pluck(_.rest(characters, 'blocked'), 'name');\n   * // => ['fred', 'pebbles']\n   *\n   * // using \"_.where\" callback shorthand\n   * _.rest(characters, { 'employer': 'slate' });\n   * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]\n   */\n  function rest(array, callback, thisArg) {\n    if (typeof callback != 'number' && callback != null) {\n      var n = 0,\n          index = -1,\n          length = array ? array.length : 0;\n\n      callback = createCallback(callback, thisArg, 3);\n      while (++index < length && callback(array[index], index, array)) {\n        n++;\n      }\n    } else {\n      n = callback == null || thisArg ? 1 : nativeMax(0, callback);\n    }\n    return slice(array, n);\n  }\n\n  /**\n   * Uses a binary search to determine the smallest index at which a value\n   * should be inserted into a given sorted array in order to maintain the sort\n   * order of the array. If a callback is provided it will be executed for\n   * `value` and each element of `array` to compute their sort ranking. The\n   * callback is bound to `thisArg` and invoked with one argument; (value).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to evaluate.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {number} Returns the index at which `value` should be inserted\n   *  into `array`.\n   * @example\n   *\n   * _.sortedIndex([20, 30, 50], 40);\n   * // => 2\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.sortedIndex([{ 'x': 20 }, { 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');\n   * // => 2\n   *\n   * var dict = {\n   *   'wordToNumber': { 'twenty': 20, 'thirty': 30, 'fourty': 40, 'fifty': 50 }\n   * };\n   *\n   * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {\n   *   return dict.wordToNumber[word];\n   * });\n   * // => 2\n   *\n   * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {\n   *   return this.wordToNumber[word];\n   * }, dict);\n   * // => 2\n   */\n  function sortedIndex(array, value, callback, thisArg) {\n    var low = 0,\n        high = array ? array.length : low;\n\n    // explicitly reference `identity` for better inlining in Firefox\n    callback = callback ? createCallback(callback, thisArg, 1) : identity;\n    value = callback(value);\n\n    while (low < high) {\n      var mid = low + high >>> 1;\n      callback(array[mid]) < value ? low = mid + 1 : high = mid;\n    }\n    return low;\n  }\n\n  /**\n   * Creates an array of unique values, in order, of the provided arrays using\n   * strict equality for comparisons, i.e. `===`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {...Array} [array] The arrays to inspect.\n   * @returns {Array} Returns an array of combined values.\n   * @example\n   *\n   * _.union([1, 2, 3], [5, 2, 1, 4], [2, 1]);\n   * // => [1, 2, 3, 5, 4]\n   */\n  function union() {\n    return baseUniq(baseFlatten(arguments, true, true));\n  }\n\n  /**\n   * Creates a duplicate-value-free version of an array using strict equality\n   * for comparisons, i.e. `===`. If the array is sorted, providing\n   * `true` for `isSorted` will use a faster algorithm. If a callback is provided\n   * each element of `array` is passed through the callback before uniqueness\n   * is computed. The callback is bound to `thisArg` and invoked with three\n   * arguments; (value, index, array).\n   *\n   * If a property name is provided for `callback` the created \"_.pluck\" style\n   * callback will return the property value of the given element.\n   *\n   * If an object is provided for `callback` the created \"_.where\" style callback\n   * will return `true` for elements that have the properties of the given object,\n   * else `false`.\n   *\n   * @static\n   * @memberOf _\n   * @alias unique\n   * @category Arrays\n   * @param {Array} array The array to process.\n   * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.\n   * @param {Function|Object|string} [callback=identity] The function called\n   *  per iteration. If a property name or object is provided it will be used\n   *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Array} Returns a duplicate-value-free array.\n   * @example\n   *\n   * _.uniq([1, 2, 1, 3, 1]);\n   * // => [1, 2, 3]\n   *\n   * _.uniq([1, 1, 2, 2, 3], true);\n   * // => [1, 2, 3]\n   *\n   * _.uniq(['A', 'b', 'C', 'a', 'B', 'c'], function(letter) { return letter.toLowerCase(); });\n   * // => ['A', 'b', 'C']\n   *\n   * _.uniq([1, 2.5, 3, 1.5, 2, 3.5], function(num) { return this.floor(num); }, Math);\n   * // => [1, 2.5, 3]\n   *\n   * // using \"_.pluck\" callback shorthand\n   * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n   * // => [{ 'x': 1 }, { 'x': 2 }]\n   */\n  function uniq(array, isSorted, callback, thisArg) {\n    // juggle arguments\n    if (typeof isSorted != 'boolean' && isSorted != null) {\n      thisArg = callback;\n      callback = typeof isSorted != 'function' && thisArg && thisArg[isSorted] === array ? null : isSorted;\n      isSorted = false;\n    }\n    if (callback != null) {\n      callback = createCallback(callback, thisArg, 3);\n    }\n    return baseUniq(array, isSorted, callback);\n  }\n\n  /**\n   * Creates an array excluding all provided values using strict equality for\n   * comparisons, i.e. `===`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to filter.\n   * @param {...*} [value] The values to exclude.\n   * @returns {Array} Returns a new array of filtered values.\n   * @example\n   *\n   * _.without([1, 2, 1, 0, 3, 1, 4], 0, 1);\n   * // => [2, 3, 4]\n   */\n  function without(array) {\n    return baseDifference(array, slice(arguments, 1));\n  }\n\n  /**\n   * Creates an array of grouped elements, the first of which contains the first\n   * elements of the given arrays, the second of which contains the second\n   * elements of the given arrays, and so on.\n   *\n   * @static\n   * @memberOf _\n   * @alias unzip\n   * @category Arrays\n   * @param {...Array} [array] Arrays to process.\n   * @returns {Array} Returns a new array of grouped elements.\n   * @example\n   *\n   * _.zip(['fred', 'barney'], [30, 40], [true, false]);\n   * // => [['fred', 30, true], ['barney', 40, false]]\n   */\n  function zip() {\n    var index = -1,\n        length = max(pluck(arguments, 'length')),\n        result = Array(length < 0 ? 0 : length);\n\n    while (++index < length) {\n      result[index] = pluck(arguments, index);\n    }\n    return result;\n  }\n\n  /**\n   * Creates an object composed from arrays of `keys` and `values`. Provide\n   * either a single two dimensional array, i.e. `[[key1, value1], [key2, value2]]`\n   * or two arrays, one of `keys` and one of corresponding `values`.\n   *\n   * @static\n   * @memberOf _\n   * @alias object\n   * @category Arrays\n   * @param {Array} keys The array of keys.\n   * @param {Array} [values=[]] The array of values.\n   * @returns {Object} Returns an object composed of the given keys and\n   *  corresponding values.\n   * @example\n   *\n   * _.zipObject(['fred', 'barney'], [30, 40]);\n   * // => { 'fred': 30, 'barney': 40 }\n   */\n  function zipObject(keys, values) {\n    var index = -1,\n        length = keys ? keys.length : 0,\n        result = {};\n\n    if (!values && length && !isArray(keys[0])) {\n      values = [];\n    }\n    while (++index < length) {\n      var key = keys[index];\n      if (values) {\n        result[key] = values[index];\n      } else if (key) {\n        result[key[0]] = key[1];\n      }\n    }\n    return result;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a function that executes `func`, with  the `this` binding and\n   * arguments of the created function, only after being called `n` times.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {number} n The number of times the function must be called before\n   *  `func` is executed.\n   * @param {Function} func The function to restrict.\n   * @returns {Function} Returns the new restricted function.\n   * @example\n   *\n   * var saves = ['profile', 'settings'];\n   *\n   * var done = _.after(saves.length, function() {\n   *   console.log('Done saving!');\n   * });\n   *\n   * _.forEach(saves, function(type) {\n   *   asyncSave({ 'type': type, 'complete': done });\n   * });\n   * // => logs 'Done saving!', after all saves have completed\n   */\n  function after(n, func) {\n    if (!isFunction(func)) {\n      throw new TypeError();\n    }\n    return function () {\n      if (--n < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  }\n\n  /**\n   * Creates a function that, when called, invokes `func` with the `this`\n   * binding of `thisArg` and prepends any additional `bind` arguments to those\n   * provided to the bound function.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to bind.\n   * @param {*} [thisArg] The `this` binding of `func`.\n   * @param {...*} [arg] Arguments to be partially applied.\n   * @returns {Function} Returns the new bound function.\n   * @example\n   *\n   * var func = function(greeting) {\n   *   return greeting + ' ' + this.name;\n   * };\n   *\n   * func = _.bind(func, { 'name': 'fred' }, 'hi');\n   * func();\n   * // => 'hi fred'\n   */\n  function bind(func, thisArg) {\n    return arguments.length > 2 ? createWrapper(func, 17, slice(arguments, 2), null, thisArg) : createWrapper(func, 1, null, null, thisArg);\n  }\n\n  /**\n   * Binds methods of an object to the object itself, overwriting the existing\n   * method. Method names may be specified as individual arguments or as arrays\n   * of method names. If no method names are provided all the function properties\n   * of `object` will be bound.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Object} object The object to bind and assign the bound methods to.\n   * @param {...string} [methodName] The object method names to\n   *  bind, specified as individual method names or arrays of method names.\n   * @returns {Object} Returns `object`.\n   * @example\n   *\n   * var view = {\n   *   'label': 'docs',\n   *   'onClick': function() { console.log('clicked ' + this.label); }\n   * };\n   *\n   * _.bindAll(view);\n   * jQuery('#docs').on('click', view.onClick);\n   * // => logs 'clicked docs', when the button is clicked\n   */\n  function bindAll(object) {\n    var funcs = arguments.length > 1 ? baseFlatten(arguments, true, false, 1) : functions(object),\n        index = -1,\n        length = funcs.length;\n\n    while (++index < length) {\n      var key = funcs[index];\n      object[key] = createWrapper(object[key], 1, null, null, object);\n    }\n    return object;\n  }\n\n  /**\n   * Creates a function that is the composition of the provided functions,\n   * where each function consumes the return value of the function that follows.\n   * For example, composing the functions `f()`, `g()`, and `h()` produces `f(g(h()))`.\n   * Each function is executed with the `this` binding of the composed function.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {...Function} [func] Functions to compose.\n   * @returns {Function} Returns the new composed function.\n   * @example\n   *\n   * var realNameMap = {\n   *   'pebbles': 'penelope'\n   * };\n   *\n   * var format = function(name) {\n   *   name = realNameMap[name.toLowerCase()] || name;\n   *   return name.charAt(0).toUpperCase() + name.slice(1).toLowerCase();\n   * };\n   *\n   * var greet = function(formatted) {\n   *   return 'Hiya ' + formatted + '!';\n   * };\n   *\n   * var welcome = _.compose(greet, format);\n   * welcome('pebbles');\n   * // => 'Hiya Penelope!'\n   */\n  function compose() {\n    var funcs = arguments,\n        length = funcs.length;\n\n    while (length--) {\n      if (!isFunction(funcs[length])) {\n        throw new TypeError();\n      }\n    }\n    return function () {\n      var args = arguments,\n          length = funcs.length;\n\n      while (length--) {\n        args = [funcs[length].apply(this, args)];\n      }\n      return args[0];\n    };\n  }\n\n  /**\n   * Creates a function that will delay the execution of `func` until after\n   * `wait` milliseconds have elapsed since the last time it was invoked.\n   * Provide an options object to indicate that `func` should be invoked on\n   * the leading and/or trailing edge of the `wait` timeout. Subsequent calls\n   * to the debounced function will return the result of the last `func` call.\n   *\n   * Note: If `leading` and `trailing` options are `true` `func` will be called\n   * on the trailing edge of the timeout only if the the debounced function is\n   * invoked more than once during the `wait` timeout.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to debounce.\n   * @param {number} wait The number of milliseconds to delay.\n   * @param {Object} [options] The options object.\n   * @param {boolean} [options.leading=false] Specify execution on the leading edge of the timeout.\n   * @param {number} [options.maxWait] The maximum time `func` is allowed to be delayed before it's called.\n   * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.\n   * @returns {Function} Returns the new debounced function.\n   * @example\n   *\n   * // avoid costly calculations while the window size is in flux\n   * var lazyLayout = _.debounce(calculateLayout, 150);\n   * jQuery(window).on('resize', lazyLayout);\n   *\n   * // execute `sendMail` when the click event is fired, debouncing subsequent calls\n   * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {\n   *   'leading': true,\n   *   'trailing': false\n   * });\n   *\n   * // ensure `batchLog` is executed once after 1 second of debounced calls\n   * var source = new EventSource('/stream');\n   * source.addEventListener('message', _.debounce(batchLog, 250, {\n   *   'maxWait': 1000\n   * }, false);\n   */\n  function debounce(func, wait, options) {\n    var args,\n        maxTimeoutId,\n        result,\n        stamp,\n        thisArg,\n        timeoutId,\n        trailingCall,\n        lastCalled = 0,\n        maxWait = false,\n        trailing = true;\n\n    if (!isFunction(func)) {\n      throw new TypeError();\n    }\n    wait = nativeMax(0, wait) || 0;\n    if (options === true) {\n      var leading = true;\n      trailing = false;\n    } else if (isObject(options)) {\n      leading = options.leading;\n      maxWait = 'maxWait' in options && (nativeMax(wait, options.maxWait) || 0);\n      trailing = 'trailing' in options ? options.trailing : trailing;\n    }\n    var delayed = function delayed() {\n      var remaining = wait - (now() - stamp);\n      if (remaining <= 0) {\n        if (maxTimeoutId) {\n          clearTimeout(maxTimeoutId);\n        }\n        var isCalled = trailingCall;\n        maxTimeoutId = timeoutId = trailingCall = undefined;\n        if (isCalled) {\n          lastCalled = now();\n          result = func.apply(thisArg, args);\n          if (!timeoutId && !maxTimeoutId) {\n            args = thisArg = null;\n          }\n        }\n      } else {\n        timeoutId = setTimeout(delayed, remaining);\n      }\n    };\n\n    var maxDelayed = function maxDelayed() {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      maxTimeoutId = timeoutId = trailingCall = undefined;\n      if (trailing || maxWait !== wait) {\n        lastCalled = now();\n        result = func.apply(thisArg, args);\n        if (!timeoutId && !maxTimeoutId) {\n          args = thisArg = null;\n        }\n      }\n    };\n\n    return function () {\n      args = arguments;\n      stamp = now();\n      thisArg = this;\n      trailingCall = trailing && (timeoutId || !leading);\n\n      if (maxWait === false) {\n        var leadingCall = leading && !timeoutId;\n      } else {\n        if (!maxTimeoutId && !leading) {\n          lastCalled = stamp;\n        }\n        var remaining = maxWait - (stamp - lastCalled),\n            isCalled = remaining <= 0;\n\n        if (isCalled) {\n          if (maxTimeoutId) {\n            maxTimeoutId = clearTimeout(maxTimeoutId);\n          }\n          lastCalled = stamp;\n          result = func.apply(thisArg, args);\n        } else if (!maxTimeoutId) {\n          maxTimeoutId = setTimeout(maxDelayed, remaining);\n        }\n      }\n      if (isCalled && timeoutId) {\n        timeoutId = clearTimeout(timeoutId);\n      } else if (!timeoutId && wait !== maxWait) {\n        timeoutId = setTimeout(delayed, wait);\n      }\n      if (leadingCall) {\n        isCalled = true;\n        result = func.apply(thisArg, args);\n      }\n      if (isCalled && !timeoutId && !maxTimeoutId) {\n        args = thisArg = null;\n      }\n      return result;\n    };\n  }\n\n  /**\n   * Defers executing the `func` function until the current call stack has cleared.\n   * Additional arguments will be provided to `func` when it is invoked.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to defer.\n   * @param {...*} [arg] Arguments to invoke the function with.\n   * @returns {number} Returns the timer id.\n   * @example\n   *\n   * _.defer(function(text) { console.log(text); }, 'deferred');\n   * // logs 'deferred' after one or more milliseconds\n   */\n  function defer(func) {\n    if (!isFunction(func)) {\n      throw new TypeError();\n    }\n    var args = slice(arguments, 1);\n    return setTimeout(function () {\n      func.apply(undefined, args);\n    }, 1);\n  }\n\n  /**\n   * Executes the `func` function after `wait` milliseconds. Additional arguments\n   * will be provided to `func` when it is invoked.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to delay.\n   * @param {number} wait The number of milliseconds to delay execution.\n   * @param {...*} [arg] Arguments to invoke the function with.\n   * @returns {number} Returns the timer id.\n   * @example\n   *\n   * _.delay(function(text) { console.log(text); }, 1000, 'later');\n   * // => logs 'later' after one second\n   */\n  function delay(func, wait) {\n    if (!isFunction(func)) {\n      throw new TypeError();\n    }\n    var args = slice(arguments, 2);\n    return setTimeout(function () {\n      func.apply(undefined, args);\n    }, wait);\n  }\n\n  /**\n   * Creates a function that memoizes the result of `func`. If `resolver` is\n   * provided it will be used to determine the cache key for storing the result\n   * based on the arguments provided to the memoized function. By default, the\n   * first argument provided to the memoized function is used as the cache key.\n   * The `func` is executed with the `this` binding of the memoized function.\n   * The result cache is exposed as the `cache` property on the memoized function.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to have its output memoized.\n   * @param {Function} [resolver] A function used to resolve the cache key.\n   * @returns {Function} Returns the new memoizing function.\n   * @example\n   *\n   * var fibonacci = _.memoize(function(n) {\n   *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);\n   * });\n   *\n   * fibonacci(9)\n   * // => 34\n   *\n   * var data = {\n   *   'fred': { 'name': 'fred', 'age': 40 },\n   *   'pebbles': { 'name': 'pebbles', 'age': 1 }\n   * };\n   *\n   * // modifying the result cache\n   * var get = _.memoize(function(name) { return data[name]; }, _.identity);\n   * get('pebbles');\n   * // => { 'name': 'pebbles', 'age': 1 }\n   *\n   * get.cache.pebbles.name = 'penelope';\n   * get('pebbles');\n   * // => { 'name': 'penelope', 'age': 1 }\n   */\n  function memoize(func, resolver) {\n    var cache = {};\n    return function () {\n      var key = resolver ? resolver.apply(this, arguments) : keyPrefix + arguments[0];\n      return hasOwnProperty.call(cache, key) ? cache[key] : cache[key] = func.apply(this, arguments);\n    };\n  }\n\n  /**\n   * Creates a function that is restricted to execute `func` once. Repeat calls to\n   * the function will return the value of the first call. The `func` is executed\n   * with the `this` binding of the created function.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to restrict.\n   * @returns {Function} Returns the new restricted function.\n   * @example\n   *\n   * var initialize = _.once(createApplication);\n   * initialize();\n   * initialize();\n   * // `initialize` executes `createApplication` once\n   */\n  function once(func) {\n    var ran, result;\n\n    if (!isFunction(func)) {\n      throw new TypeError();\n    }\n    return function () {\n      if (ran) {\n        return result;\n      }\n      ran = true;\n      result = func.apply(this, arguments);\n\n      // clear the `func` variable so the function may be garbage collected\n      func = null;\n      return result;\n    };\n  }\n\n  /**\n   * Creates a function that, when called, invokes `func` with any additional\n   * `partial` arguments prepended to those provided to the new function. This\n   * method is similar to `_.bind` except it does **not** alter the `this` binding.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to partially apply arguments to.\n   * @param {...*} [arg] Arguments to be partially applied.\n   * @returns {Function} Returns the new partially applied function.\n   * @example\n   *\n   * var greet = function(greeting, name) { return greeting + ' ' + name; };\n   * var hi = _.partial(greet, 'hi');\n   * hi('fred');\n   * // => 'hi fred'\n   */\n  function partial(func) {\n    return createWrapper(func, 16, slice(arguments, 1));\n  }\n\n  /**\n   * Creates a function that, when executed, will only call the `func` function\n   * at most once per every `wait` milliseconds. Provide an options object to\n   * indicate that `func` should be invoked on the leading and/or trailing edge\n   * of the `wait` timeout. Subsequent calls to the throttled function will\n   * return the result of the last `func` call.\n   *\n   * Note: If `leading` and `trailing` options are `true` `func` will be called\n   * on the trailing edge of the timeout only if the the throttled function is\n   * invoked more than once during the `wait` timeout.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to throttle.\n   * @param {number} wait The number of milliseconds to throttle executions to.\n   * @param {Object} [options] The options object.\n   * @param {boolean} [options.leading=true] Specify execution on the leading edge of the timeout.\n   * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.\n   * @returns {Function} Returns the new throttled function.\n   * @example\n   *\n   * // avoid excessively updating the position while scrolling\n   * var throttled = _.throttle(updatePosition, 100);\n   * jQuery(window).on('scroll', throttled);\n   *\n   * // execute `renewToken` when the click event is fired, but not more than once every 5 minutes\n   * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {\n   *   'trailing': false\n   * }));\n   */\n  function throttle(func, wait, options) {\n    var leading = true,\n        trailing = true;\n\n    if (!isFunction(func)) {\n      throw new TypeError();\n    }\n    if (options === false) {\n      leading = false;\n    } else if (isObject(options)) {\n      leading = 'leading' in options ? options.leading : leading;\n      trailing = 'trailing' in options ? options.trailing : trailing;\n    }\n    options = {};\n    options.leading = leading;\n    options.maxWait = wait;\n    options.trailing = trailing;\n\n    return debounce(func, wait, options);\n  }\n\n  /**\n   * Creates a function that provides `value` to the wrapper function as its\n   * first argument. Additional arguments provided to the function are appended\n   * to those provided to the wrapper function. The wrapper is executed with\n   * the `this` binding of the created function.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {*} value The value to wrap.\n   * @param {Function} wrapper The wrapper function.\n   * @returns {Function} Returns the new function.\n   * @example\n   *\n   * var p = _.wrap(_.escape, function(func, text) {\n   *   return '<p>' + func(text) + '</p>';\n   * });\n   *\n   * p('Fred, Wilma, & Pebbles');\n   * // => '<p>Fred, Wilma, &amp; Pebbles</p>'\n   */\n  function wrap(value, wrapper) {\n    return createWrapper(wrapper, 16, [value]);\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Produces a callback bound to an optional `thisArg`. If `func` is a property\n   * name the created callback will return the property value for a given element.\n   * If `func` is an object the created callback will return `true` for elements\n   * that contain the equivalent object properties, otherwise it will return `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {*} [func=identity] The value to convert to a callback.\n   * @param {*} [thisArg] The `this` binding of the created callback.\n   * @param {number} [argCount] The number of arguments the callback accepts.\n   * @returns {Function} Returns a callback function.\n   * @example\n   *\n   * var characters = [\n   *   { 'name': 'barney', 'age': 36 },\n   *   { 'name': 'fred',   'age': 40 }\n   * ];\n   *\n   * // wrap to create custom callback shorthands\n   * _.createCallback = _.wrap(_.createCallback, function(func, callback, thisArg) {\n   *   var match = /^(.+?)__([gl]t)(.+)$/.exec(callback);\n   *   return !match ? func(callback, thisArg) : function(object) {\n   *     return match[2] == 'gt' ? object[match[1]] > match[3] : object[match[1]] < match[3];\n   *   };\n   * });\n   *\n   * _.filter(characters, 'age__gt38');\n   * // => [{ 'name': 'fred', 'age': 40 }]\n   */\n  function createCallback(func, thisArg, argCount) {\n    var type = typeof func === 'undefined' ? 'undefined' : _typeof(func);\n    if (func == null || type == 'function') {\n      return baseCreateCallback(func, thisArg, argCount);\n    }\n    // handle \"_.pluck\" style callback shorthands\n    if (type != 'object') {\n      return property(func);\n    }\n    var props = keys(func);\n    return function (object) {\n      var length = props.length,\n          result = false;\n\n      while (length--) {\n        if (!(result = object[props[length]] === func[props[length]])) {\n          break;\n        }\n      }\n      return result;\n    };\n  }\n\n  /**\n   * Converts the characters `&`, `<`, `>`, `\"`, and `'` in `string` to their\n   * corresponding HTML entities.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {string} string The string to escape.\n   * @returns {string} Returns the escaped string.\n   * @example\n   *\n   * _.escape('Fred, Wilma, & Pebbles');\n   * // => 'Fred, Wilma, &amp; Pebbles'\n   */\n  function escape(string) {\n    return string == null ? '' : String(string).replace(reUnescapedHtml, escapeHtmlChar);\n  }\n\n  /**\n   * This method returns the first argument provided to it.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {*} value Any value.\n   * @returns {*} Returns `value`.\n   * @example\n   *\n   * var object = { 'name': 'fred' };\n   * _.identity(object) === object;\n   * // => true\n   */\n  function identity(value) {\n    return value;\n  }\n\n  /**\n   * Adds function properties of a source object to the destination object.\n   * If `object` is a function methods will be added to its prototype as well.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {Function|Object} [object=lodash] object The destination object.\n   * @param {Object} source The object of functions to add.\n   * @param {Object} [options] The options object.\n   * @param {boolean} [options.chain=true] Specify whether the functions added are chainable.\n   * @example\n   *\n   * function capitalize(string) {\n   *   return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n   * }\n   *\n   * _.mixin({ 'capitalize': capitalize });\n   * _.capitalize('fred');\n   * // => 'Fred'\n   *\n   * _('fred').capitalize().value();\n   * // => 'Fred'\n   *\n   * _.mixin({ 'capitalize': capitalize }, { 'chain': false });\n   * _('fred').capitalize();\n   * // => 'Fred'\n   */\n  function mixin(object) {\n    forEach(functions(object), function (methodName) {\n      var func = lodash[methodName] = object[methodName];\n\n      lodash.prototype[methodName] = function () {\n        var args = [this.__wrapped__];\n        push.apply(args, arguments);\n\n        var result = func.apply(lodash, args);\n        return this.__chain__ ? new lodashWrapper(result, true) : result;\n      };\n    });\n  }\n\n  /**\n   * Reverts the '_' variable to its previous value and returns a reference to\n   * the `lodash` function.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @returns {Function} Returns the `lodash` function.\n   * @example\n   *\n   * var lodash = _.noConflict();\n   */\n  function noConflict() {\n    root._ = oldDash;\n    return this;\n  }\n\n  /**\n   * A no-operation function.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @example\n   *\n   * var object = { 'name': 'fred' };\n   * _.noop(object) === undefined;\n   * // => true\n   */\n  function noop() {}\n  // no operation performed\n\n\n  /**\n   * Gets the number of milliseconds that have elapsed since the Unix epoch\n   * (1 January 1970 00:00:00 UTC).\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @example\n   *\n   * var stamp = _.now();\n   * _.defer(function() { console.log(_.now() - stamp); });\n   * // => logs the number of milliseconds it took for the deferred function to be called\n   */\n  var now = isNative(now = Date.now) && now || function () {\n    return new Date().getTime();\n  };\n\n  /**\n   * Creates a \"_.pluck\" style function, which returns the `key` value of a\n   * given object.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {string} key The name of the property to retrieve.\n   * @returns {Function} Returns the new function.\n   * @example\n   *\n   * var characters = [\n   *   { 'name': 'fred',   'age': 40 },\n   *   { 'name': 'barney', 'age': 36 }\n   * ];\n   *\n   * var getName = _.property('name');\n   *\n   * _.map(characters, getName);\n   * // => ['barney', 'fred']\n   *\n   * _.sortBy(characters, getName);\n   * // => [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred',   'age': 40 }]\n   */\n  function property(key) {\n    return function (object) {\n      return object[key];\n    };\n  }\n\n  /**\n   * Produces a random number between `min` and `max` (inclusive). If only one\n   * argument is provided a number between `0` and the given number will be\n   * returned. If `floating` is truey or either `min` or `max` are floats a\n   * floating-point number will be returned instead of an integer.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {number} [min=0] The minimum possible value.\n   * @param {number} [max=1] The maximum possible value.\n   * @param {boolean} [floating=false] Specify returning a floating-point number.\n   * @returns {number} Returns a random number.\n   * @example\n   *\n   * _.random(0, 5);\n   * // => an integer between 0 and 5\n   *\n   * _.random(5);\n   * // => also an integer between 0 and 5\n   *\n   * _.random(5, true);\n   * // => a floating-point number between 0 and 5\n   *\n   * _.random(1.2, 5.2);\n   * // => a floating-point number between 1.2 and 5.2\n   */\n  function random(min, max) {\n    if (min == null && max == null) {\n      max = 1;\n    }\n    min = +min || 0;\n    if (max == null) {\n      max = min;\n      min = 0;\n    } else {\n      max = +max || 0;\n    }\n    return min + floor(nativeRandom() * (max - min + 1));\n  }\n\n  /**\n   * Resolves the value of property `key` on `object`. If `key` is a function\n   * it will be invoked with the `this` binding of `object` and its result returned,\n   * else the property value is returned. If `object` is falsey then `undefined`\n   * is returned.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {Object} object The object to inspect.\n   * @param {string} key The name of the property to resolve.\n   * @returns {*} Returns the resolved value.\n   * @example\n   *\n   * var object = {\n   *   'cheese': 'crumpets',\n   *   'stuff': function() {\n   *     return 'nonsense';\n   *   }\n   * };\n   *\n   * _.result(object, 'cheese');\n   * // => 'crumpets'\n   *\n   * _.result(object, 'stuff');\n   * // => 'nonsense'\n   */\n  function result(object, key) {\n    if (object) {\n      var value = object[key];\n      return isFunction(value) ? object[key]() : value;\n    }\n  }\n\n  /**\n   * A micro-templating method that handles arbitrary delimiters, preserves\n   * whitespace, and correctly escapes quotes within interpolated code.\n   *\n   * Note: In the development build, `_.template` utilizes sourceURLs for easier\n   * debugging. See http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl\n   *\n   * For more information on precompiling templates see:\n   * https://lodash.com/custom-builds\n   *\n   * For more information on Chrome extension sandboxes see:\n   * http://developer.chrome.com/stable/extensions/sandboxingEval.html\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {string} text The template text.\n   * @param {Object} data The data object used to populate the text.\n   * @param {Object} [options] The options object.\n   * @param {RegExp} [options.escape] The \"escape\" delimiter.\n   * @param {RegExp} [options.evaluate] The \"evaluate\" delimiter.\n   * @param {Object} [options.imports] An object to import into the template as local variables.\n   * @param {RegExp} [options.interpolate] The \"interpolate\" delimiter.\n   * @param {string} [sourceURL] The sourceURL of the template's compiled source.\n   * @param {string} [variable] The data object variable name.\n   * @returns {Function|string} Returns a compiled function when no `data` object\n   *  is given, else it returns the interpolated text.\n   * @example\n   *\n   * // using the \"interpolate\" delimiter to create a compiled template\n   * var compiled = _.template('hello <%= name %>');\n   * compiled({ 'name': 'fred' });\n   * // => 'hello fred'\n   *\n   * // using the \"escape\" delimiter to escape HTML in data property values\n   * _.template('<b><%- value %></b>', { 'value': '<script>' });\n   * // => '<b>&lt;script&gt;</b>'\n   *\n   * // using the \"evaluate\" delimiter to generate HTML\n   * var list = '<% _.forEach(people, function(name) { %><li><%- name %></li><% }); %>';\n   * _.template(list, { 'people': ['fred', 'barney'] });\n   * // => '<li>fred</li><li>barney</li>'\n   *\n   * // using the ES6 delimiter as an alternative to the default \"interpolate\" delimiter\n   * _.template('hello ${ name }', { 'name': 'pebbles' });\n   * // => 'hello pebbles'\n   *\n   * // using the internal `print` function in \"evaluate\" delimiters\n   * _.template('<% print(\"hello \" + name); %>!', { 'name': 'barney' });\n   * // => 'hello barney!'\n   *\n   * // using a custom template delimiters\n   * _.templateSettings = {\n   *   'interpolate': /{{([\\s\\S]+?)}}/g\n   * };\n   *\n   * _.template('hello {{ name }}!', { 'name': 'mustache' });\n   * // => 'hello mustache!'\n   *\n   * // using the `imports` option to import jQuery\n   * var list = '<% jq.each(people, function(name) { %><li><%- name %></li><% }); %>';\n   * _.template(list, { 'people': ['fred', 'barney'] }, { 'imports': { 'jq': jQuery } });\n   * // => '<li>fred</li><li>barney</li>'\n   *\n   * // using the `sourceURL` option to specify a custom sourceURL for the template\n   * var compiled = _.template('hello <%= name %>', null, { 'sourceURL': '/basic/greeting.jst' });\n   * compiled(data);\n   * // => find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector\n   *\n   * // using the `variable` option to ensure a with-statement isn't used in the compiled template\n   * var compiled = _.template('hi <%= data.name %>!', null, { 'variable': 'data' });\n   * compiled.source;\n   * // => function(data) {\n   *   var __t, __p = '', __e = _.escape;\n   *   __p += 'hi ' + ((__t = ( data.name )) == null ? '' : __t) + '!';\n   *   return __p;\n   * }\n   *\n   * // using the `source` property to inline compiled templates for meaningful\n   * // line numbers in error messages and a stack trace\n   * fs.writeFileSync(path.join(cwd, 'jst.js'), '\\\n   *   var JST = {\\\n   *     \"main\": ' + _.template(mainText).source + '\\\n   *   };\\\n   * ');\n   */\n  function template(text, data, options) {\n    var _ = lodash,\n        settings = _.templateSettings;\n\n    text = String(text || '');\n    options = defaults({}, options, settings);\n\n    var index = 0,\n        source = \"__p += '\",\n        variable = options.variable;\n\n    var reDelimiters = RegExp((options.escape || reNoMatch).source + '|' + (options.interpolate || reNoMatch).source + '|' + (options.evaluate || reNoMatch).source + '|$', 'g');\n\n    text.replace(reDelimiters, function (match, escapeValue, interpolateValue, evaluateValue, offset) {\n      source += text.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n      if (escapeValue) {\n        source += \"' +\\n_.escape(\" + escapeValue + \") +\\n'\";\n      }\n      if (evaluateValue) {\n        source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n      }\n      if (interpolateValue) {\n        source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n      }\n      index = offset + match.length;\n      return match;\n    });\n\n    source += \"';\\n\";\n    if (!variable) {\n      variable = 'obj';\n      source = 'with (' + variable + ' || {}) {\\n' + source + '\\n}\\n';\n    }\n    source = 'function(' + variable + ') {\\n' + \"var __t, __p = '', __j = Array.prototype.join;\\n\" + \"function print() { __p += __j.call(arguments, '') }\\n\" + source + 'return __p\\n}';\n\n    try {\n      var result = Function('_', 'return ' + source)(_);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n    if (data) {\n      return result(data);\n    }\n    result.source = source;\n    return result;\n  }\n\n  /**\n   * Executes the callback `n` times, returning an array of the results\n   * of each callback execution. The callback is bound to `thisArg` and invoked\n   * with one argument; (index).\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {number} n The number of times to execute the callback.\n   * @param {Function} callback The function called per iteration.\n   * @param {*} [thisArg] The `this` binding of `callback`.\n   * @returns {Array} Returns an array of the results of each `callback` execution.\n   * @example\n   *\n   * var diceRolls = _.times(3, _.partial(_.random, 1, 6));\n   * // => [3, 6, 4]\n   *\n   * _.times(3, function(n) { mage.castSpell(n); });\n   * // => calls `mage.castSpell(n)` three times, passing `n` of `0`, `1`, and `2` respectively\n   *\n   * _.times(3, function(n) { this.cast(n); }, mage);\n   * // => also calls `mage.castSpell(n)` three times\n   */\n  function times(n, callback, thisArg) {\n    n = (n = +n) > -1 ? n : 0;\n    var index = -1,\n        result = Array(n);\n\n    callback = baseCreateCallback(callback, thisArg, 1);\n    while (++index < n) {\n      result[index] = callback(index);\n    }\n    return result;\n  }\n\n  /**\n   * The inverse of `_.escape` this method converts the HTML entities\n   * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to their\n   * corresponding characters.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {string} string The string to unescape.\n   * @returns {string} Returns the unescaped string.\n   * @example\n   *\n   * _.unescape('Fred, Barney &amp; Pebbles');\n   * // => 'Fred, Barney & Pebbles'\n   */\n  function unescape(string) {\n    return string == null ? '' : String(string).replace(reEscapedHtml, unescapeHtmlChar);\n  }\n\n  /**\n   * Generates a unique ID. If `prefix` is provided the ID will be appended to it.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {string} [prefix] The value to prefix the ID with.\n   * @returns {string} Returns the unique ID.\n   * @example\n   *\n   * _.uniqueId('contact_');\n   * // => 'contact_104'\n   *\n   * _.uniqueId();\n   * // => '105'\n   */\n  function uniqueId(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a `lodash` object that wraps the given value with explicit\n   * method chaining enabled.\n   *\n   * @static\n   * @memberOf _\n   * @category Chaining\n   * @param {*} value The value to wrap.\n   * @returns {Object} Returns the wrapper object.\n   * @example\n   *\n   * var characters = [\n   *   { 'name': 'barney',  'age': 36 },\n   *   { 'name': 'fred',    'age': 40 },\n   *   { 'name': 'pebbles', 'age': 1 }\n   * ];\n   *\n   * var youngest = _.chain(characters)\n   *     .sortBy('age')\n   *     .map(function(chr) { return chr.name + ' is ' + chr.age; })\n   *     .first()\n   *     .value();\n   * // => 'pebbles is 1'\n   */\n  function chain(value) {\n    value = new lodashWrapper(value);\n    value.__chain__ = true;\n    return value;\n  }\n\n  /**\n   * Invokes `interceptor` with the `value` as the first argument and then\n   * returns `value`. The purpose of this method is to \"tap into\" a method\n   * chain in order to perform operations on intermediate results within\n   * the chain.\n   *\n   * @static\n   * @memberOf _\n   * @category Chaining\n   * @param {*} value The value to provide to `interceptor`.\n   * @param {Function} interceptor The function to invoke.\n   * @returns {*} Returns `value`.\n   * @example\n   *\n   * _([1, 2, 3, 4])\n   *  .tap(function(array) { array.pop(); })\n   *  .reverse()\n   *  .value();\n   * // => [3, 2, 1]\n   */\n  function tap(value, interceptor) {\n    interceptor(value);\n    return value;\n  }\n\n  /**\n   * Enables explicit method chaining on the wrapper object.\n   *\n   * @name chain\n   * @memberOf _\n   * @category Chaining\n   * @returns {*} Returns the wrapper object.\n   * @example\n   *\n   * var characters = [\n   *   { 'name': 'barney', 'age': 36 },\n   *   { 'name': 'fred',   'age': 40 }\n   * ];\n   *\n   * // without explicit chaining\n   * _(characters).first();\n   * // => { 'name': 'barney', 'age': 36 }\n   *\n   * // with explicit chaining\n   * _(characters).chain()\n   *   .first()\n   *   .pick('age')\n   *   .value();\n   * // => { 'age': 36 }\n   */\n  function wrapperChain() {\n    this.__chain__ = true;\n    return this;\n  }\n\n  /**\n   * Extracts the wrapped value.\n   *\n   * @name valueOf\n   * @memberOf _\n   * @alias value\n   * @category Chaining\n   * @returns {*} Returns the wrapped value.\n   * @example\n   *\n   * _([1, 2, 3]).valueOf();\n   * // => [1, 2, 3]\n   */\n  function wrapperValueOf() {\n    return this.__wrapped__;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // add functions that return wrapped values when chaining\n  lodash.after = after;\n  lodash.bind = bind;\n  lodash.bindAll = bindAll;\n  lodash.chain = chain;\n  lodash.compact = compact;\n  lodash.compose = compose;\n  lodash.countBy = countBy;\n  lodash.debounce = debounce;\n  lodash.defaults = defaults;\n  lodash.defer = defer;\n  lodash.delay = delay;\n  lodash.difference = difference;\n  lodash.filter = filter;\n  lodash.flatten = flatten;\n  lodash.forEach = forEach;\n  lodash.functions = functions;\n  lodash.groupBy = groupBy;\n  lodash.indexBy = indexBy;\n  lodash.initial = initial;\n  lodash.intersection = intersection;\n  lodash.invert = invert;\n  lodash.invoke = invoke;\n  lodash.keys = keys;\n  lodash.map = map;\n  lodash.max = max;\n  lodash.memoize = memoize;\n  lodash.min = min;\n  lodash.omit = omit;\n  lodash.once = once;\n  lodash.pairs = pairs;\n  lodash.partial = partial;\n  lodash.pick = pick;\n  lodash.pluck = pluck;\n  lodash.range = range;\n  lodash.reject = reject;\n  lodash.rest = rest;\n  lodash.shuffle = shuffle;\n  lodash.sortBy = sortBy;\n  lodash.tap = tap;\n  lodash.throttle = throttle;\n  lodash.times = times;\n  lodash.toArray = toArray;\n  lodash.union = union;\n  lodash.uniq = uniq;\n  lodash.values = values;\n  lodash.where = where;\n  lodash.without = without;\n  lodash.wrap = wrap;\n  lodash.zip = zip;\n\n  // add aliases\n  lodash.collect = map;\n  lodash.drop = rest;\n  lodash.each = forEach;\n  lodash.extend = assign;\n  lodash.methods = functions;\n  lodash.object = zipObject;\n  lodash.select = filter;\n  lodash.tail = rest;\n  lodash.unique = uniq;\n\n  /*--------------------------------------------------------------------------*/\n\n  // add functions that return unwrapped values when chaining\n  lodash.clone = clone;\n  lodash.contains = contains;\n  lodash.escape = escape;\n  lodash.every = every;\n  lodash.find = find;\n  lodash.has = has;\n  lodash.identity = identity;\n  lodash.indexOf = indexOf;\n  lodash.isArguments = isArguments;\n  lodash.isArray = isArray;\n  lodash.isBoolean = isBoolean;\n  lodash.isDate = isDate;\n  lodash.isElement = isElement;\n  lodash.isEmpty = isEmpty;\n  lodash.isEqual = isEqual;\n  lodash.isFinite = isFinite;\n  lodash.isFunction = isFunction;\n  lodash.isNaN = isNaN;\n  lodash.isNull = isNull;\n  lodash.isNumber = isNumber;\n  lodash.isObject = isObject;\n  lodash.isRegExp = isRegExp;\n  lodash.isString = isString;\n  lodash.isUndefined = isUndefined;\n  lodash.lastIndexOf = lastIndexOf;\n  lodash.mixin = mixin;\n  lodash.noConflict = noConflict;\n  lodash.random = random;\n  lodash.reduce = reduce;\n  lodash.reduceRight = reduceRight;\n  lodash.result = result;\n  lodash.size = size;\n  lodash.some = some;\n  lodash.sortedIndex = sortedIndex;\n  lodash.template = template;\n  lodash.unescape = unescape;\n  lodash.uniqueId = uniqueId;\n\n  // add aliases\n  lodash.all = every;\n  lodash.any = some;\n  lodash.detect = find;\n  lodash.findWhere = findWhere;\n  lodash.foldl = reduce;\n  lodash.foldr = reduceRight;\n  lodash.include = contains;\n  lodash.inject = reduce;\n\n  /*--------------------------------------------------------------------------*/\n\n  // add functions capable of returning wrapped and unwrapped values when chaining\n  lodash.first = first;\n  lodash.last = last;\n  lodash.sample = sample;\n\n  // add aliases\n  lodash.take = first;\n  lodash.head = first;\n\n  /*--------------------------------------------------------------------------*/\n\n  // add functions to `lodash.prototype`\n  mixin(lodash);\n\n  /**\n   * The semantic version number.\n   *\n   * @static\n   * @memberOf _\n   * @type string\n   */\n  lodash.VERSION = '2.4.2';\n\n  // add \"Chaining\" functions to the wrapper\n  lodash.prototype.chain = wrapperChain;\n  lodash.prototype.value = wrapperValueOf;\n\n  // add `Array` mutator functions to the wrapper\n  forEach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function (methodName) {\n    var func = arrayRef[methodName];\n    lodash.prototype[methodName] = function () {\n      var value = this.__wrapped__;\n      func.apply(value, arguments);\n\n      // avoid array-like object bugs with `Array#shift` and `Array#splice`\n      // in Firefox < 10 and IE < 9\n      if (!support.spliceObjects && value.length === 0) {\n        delete value[0];\n      }\n      return this;\n    };\n  });\n\n  // add `Array` accessor functions to the wrapper\n  forEach(['concat', 'join', 'slice'], function (methodName) {\n    var func = arrayRef[methodName];\n    lodash.prototype[methodName] = function () {\n      var value = this.__wrapped__,\n          result = func.apply(value, arguments);\n\n      if (this.__chain__) {\n        result = new lodashWrapper(result);\n        result.__chain__ = true;\n      }\n      return result;\n    };\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  // some AMD build optimizers like r.js check for condition patterns like the following:\n  if (typeof define == 'function' && _typeof(define.amd) == 'object' && define.amd) {\n    // Expose Lo-Dash to the global object even when an AMD loader is present in\n    // case Lo-Dash is loaded with a RequireJS shim config.\n    // See http://requirejs.org/docs/api.html#config-shim\n    root._ = lodash;\n\n    // define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module\n    define(function () {\n      return lodash;\n    });\n  }\n  // check for `exports` after `define` in case a build optimizer adds an `exports` object\n  else if (freeExports && freeModule) {\n      // in Node.js or RingoJS\n      if (moduleExports) {\n        (freeModule.exports = lodash)._ = lodash;\n      }\n      // in Narwhal or Rhino -require\n      else {\n          freeExports._ = lodash;\n        }\n    } else {\n      // in a browser or Rhino\n      root._ = lodash;\n    }\n}).call(undefined);\n//# sourceMappingURL=lodash.underscore.js.map"]}