{"version":3,"sources":["../../../../Seneca/node_modules/_norma@0.3.0@norma/norma-min.js"],"names":["compile","e","error","r","specmap","s","parse_spec","n","i","t","o","forEach","push","type","or","length","mark","mod","index","a","RegExp","join","re","spec","respec","reindex","parser","parse","message","column","line","processargs","Array","prototype","slice","call","describe","exec","onfail","descargs","args","specdef","options","object","p","u","c","l","d","f","h","name","m","g","v","_","isString","isNaN","parseFloat","isNumber","isBoolean","isFunction","isArray","isRegExp","isDate","isArguments","util","isError","isNull","isUndefined","isObject","each","inspect","substring","desclen","handle","defopts","extend","arguments","require","module","exports","toString"],"mappings":"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","file":"norma-min.js","sourcesContent":["/* Copyright (c) 2014-2015 Richard Rodger, MIT License */\n\"use strict\";function compile(e){if(null==e)throw error(\"no_spec\",\"no argument specification\");var r=specmap[e];if(null!=r)return r;var s=parse_spec(e),n=[],i=1,t=[\"^\"],o=0;s.forEach(function(e){if(t.push(\"(\"),e.type.or&&0<e.type.or.length){var r=1;t.push(\"(\"),t.push(e.type.mark),t.push(\")\"),e.type.or.forEach(function(e){t.push(\"|\"),t.push(\"(\"),t.push(e[1]),r++,t.push(\")\")}),\"?\"==e.mod&&t.push(\"|[UNA]?\"),n[o]={index:i},i+=r}else\"?\"==e.mod?t.push(\"[UNA\"+e.type.mark+\"]?\"):(t.push(e.type.mark),t.push(e.mod||\"\")),n[o]={index:i};n[o].mod=e.mod,t.push(\")\"),i++,o++}),t.push(\"$\");var a=new RegExp(t.join(\"\"));return r=specmap[e]={re:a,spec:e,respec:s,reindex:n}}function parse_spec(e){try{return parser.parse(e)}catch(r){throw error(\"parse\",r.message+'; spec:\"'+e+'\", col:'+r.column+\", line:\"+r.line)}}function processargs(e,r,s){var n=Array.prototype.slice.call(s||[]),i=describe(n),t=e.re.exec(i);if(!t){if(\"throw\"==r.onfail)throw error(\"invalid_arguments\",'invalid arguments; expected: \"'+e.spec+'\", was: ['+i+\"]; values: \"+descargs(n,r),{args:n,specdef:e,options:r});return null}for(var o=e.respec.object?{}:[],a=0,p=0,u=0;a<e.reindex.length;a++){var c=e.reindex[a],l=void 0;if(e.respec.object||(o[u]=l),null!=c.index){var d=t[c.index],f=\"\"!==d;if(f){var h=e.respec[a].name,m=\"*\"===e.respec[a].mod,g=\"+\"===e.respec[a].mod;if(0===d.length&&g)throw error(\"invalid_arguments\",'invalid arguments; expected: \"'+e.spec+'\", was: ['+i+\"]; values: \"+descargs(n,r),{args:n,specdef:e,options:r});if(1==d.length)l=n[p],p++,e.respec.object||(o[u]=l),null!=h&&(m||g?(o[h]=o[h]||[]).push(l):o[e.respec[a].name]=l),u++;else if(1<d.length)for(var v=0;v<d.length;v++)l=n[p],p++,e.respec.object||(o[u]=l),null!=h&&(o[h]=o[h]||[]).push(l),u++}else e.respec.object||(o[u]=void 0),u++}}return o}function describe(e){var r=[];return e.forEach(function(e){r.push(_.isString(e)?\"s\":isNaN(e)||(0|e)!==parseFloat(e)?_.isNaN(e)?\"A\":1/0===e?\"Y\":_.isNumber(e)?\"n\":_.isBoolean(e)?\"b\":_.isFunction(e)?\"f\":_.isArray(e)?\"a\":_.isRegExp(e)?\"r\":_.isDate(e)?\"d\":_.isArguments(e)?\"g\":util.isError(e)?\"e\":_.isNull(e)?\"N\":_.isUndefined(e)?\"U\":_.isObject(e)?\"o\":\"q\":\"i\")}),r.join(\"\")}function descargs(e,r){var s=[];return _.each(e,function(e){var n=util.inspect(e).substring(0,r.desclen);s.push(n)}),s}function handle(e,r,s){if((_.isArguments(r)||_.isArray(r))&&(s=r,r=null),r=null==r?defopts:_.extend({},defopts,r),null==s)throw error(\"init\",'no arguments variable; expected norma( \"...\", arguments ), '+\"or <compiled>( arguments )\",{arguments:arguments});return processargs(e,r,s)}var util=require(\"util\"),_=require(\"lodash\"),error=require(\"eraro\")({\"package\":\"norma\"}),parser=require(\"./norma-parser\"),defopts={onfail:\"throw\",desclen:33},specmap={};module.exports=function(e,r,s){var n=compile(e);return handle(n,r,s)},module.exports.compile=function(e){var r=compile(e),s=function(e,s){return handle(r,e,s)};return s.toString=function(){return util.inspect({spec:r.spec,re:\"\"+r.re})},s};\n//# sourceMappingURL=norma-min.map"]}