'use strict';

let isArguments = require('../lang/isArguments'),
    isArray = require('../lang/isArray'),
    isIndex = require('./isIndex'),
    isLength = require('./isLength'),
    keysIn = require('../object/keysIn');

/** Used for native method references. */
let objectProto = Object.prototype;

/** Used to check objects for own properties. */
let hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A fallback implementation of `Object.keys` which creates an array of the
 * own enumerable property names of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function shimKeys(object) {
  let props = keysIn(object),
      propsLength = props.length,
      length = propsLength && object.length;

  let allowIndexes = !!length && isLength(length) && (isArray(object) || isArguments(object));

  let index = -1,
      result = [];

  while (++index < propsLength) {
    let key = props[index];
    if (allowIndexes && isIndex(key, length) || hasOwnProperty.call(object, key)) {
      result.push(key);
    }
  }
  return result;
}

module.exports = shimKeys;
//# sourceMappingURL=shimKeys.js.map