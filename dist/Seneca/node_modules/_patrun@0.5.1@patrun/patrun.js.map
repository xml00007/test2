{"version":3,"sources":["../../../../Seneca/node_modules/_patrun@0.5.1@patrun/patrun.js"],"names":["root","previous_patrun","patrun","has_require","require","_","Error","gex","custom","self","top","noConflict","add","pat","data","clone","customizer","isFunction","call","keys","plains","gexers","forEach","key","val","String","match","push","sort","concat","keymap","valmap","i","length","gexer","val$","sort_prefix","sort_key","v","sk","add_gexer","k","s","g","d","f","find","r","remove","ga","a","b","findexact","exact","finalfind","stars","foundkeys","patlen","nextkeymap","gi","on","pop","path","km","part","point","list","descend","missing","acc","gexval","itermatch","extend","itermissing","valitermatch","valitermissing","toString","tree","isBoolean","arguments","dstr","name","indent","o","str","walk","n","vs","vsc","join","pa","pal","filter","x","pas","pi","p","inspect","toJSON","JSON","stringify","exports","module"],"mappings":"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","file":"patrun.js","sourcesContent":["/* Copyright (c) 2013-2016 Richard Rodger, MIT License, https://github.com/rjrodger/patrun */\n\n;(function() {\n  /* jshint node:true, asi:true, eqnull:true */\n  \"use strict\";\n\n  var root            = this\n  var previous_patrun = root.patrun\n  var has_require     = typeof require !== 'undefined'\n\n\n  var _ = root._ || has_require && require('lodash')\n  if( !_ ) \n    throw new Error('patrun requires underscore, see http://underscorejs.org')\n\n  var gex = root.gex || has_require && require('gex')\n  if( !gex ) \n    throw new Error('patrun requires gex, see https://github.com/rjrodger/gex')\n\n\n  var patrun = root.patrun = function( custom ) {\n    custom = custom || {}\n\n    var self = {}\n    var top  = {}\n\n\n    self.noConflict = function() {\n      root.patrun = previous_patrun;\n      return self;\n    }\n\n\n    self.add = function( pat, data ) {\n      pat = _.clone(pat)\n\n      var customizer = _.isFunction(custom) ? custom.call(self,pat,data) : null\n\n\n      var keys = _.keys(pat), plains = [], gexers = []\n      \n      keys.forEach(function(key){\n        var val = pat[key]\n        if( null == val ) return;\n\n        val = String(val)\n        pat[key] = val;\n\n        (( custom.gex && val.match(/[\\*\\?]/) ) ? gexers : plains ).push(key)\n      })\n\n      plains = plains.sort()\n      gexers = gexers.sort()\n\n      keys = plains.concat(gexers)\n\n\n      var keymap = top, valmap\n\n      for( var i = 0; i < keys.length; i++ ) {\n        var key = keys[i]\n        var val = pat[key]\n\n        var gexer = ( custom.gex && val.match(/[\\*\\?]/) ) ? gex(val) : null\n        if( gexer ) gexer.val$ = val\n\n        var sort_prefix = (gexer?'1':'0')+'~'\n        var sort_key = sort_prefix+key\n\n        valmap = keymap.v\n\n        if( valmap && sort_key == keymap.sk ) {\n          add_gexer( keymap, key, gexer )\n          keymap = valmap[val] || (valmap[val]={})\n        }\n        else if( !keymap.k ) {\n          add_gexer( keymap, key, gexer )\n          keymap.k = key\n          keymap.sk = sort_key\n          keymap.v = {}\n          keymap = keymap.v[val] = {}\n        }\n        else if( sort_key < keymap.sk ) {\n          var s = keymap.s, g = keymap.g\n          keymap.s = {k:keymap.k,sk:keymap.sk,v:keymap.v}\n          if( s ) keymap.s.s = s\n          if( g ) keymap.s.g = g\n\n          if( keymap.g ) keymap.g = {}\n          add_gexer( keymap, key, gexer )\n\n          keymap.k = key\n          keymap.sk = sort_key\n          keymap.v = {}\n\n          keymap = keymap.v[val] = {}\n        }\n        else {\n          valmap = keymap.v\n          keymap = keymap.s || (keymap.s = {})\n          i--\n        }\n      }\n\n      if( void 0 !== data && keymap ) {\n        keymap.d = data\n        if( customizer ) { \n          keymap.f = _.isFunction(customizer) ? customizer : customizer.find\n          keymap.r = _.isFunction(customizer.remove) ? customizer.remove : void 0\n        }\n      }\n\n      return self\n    }\n\n\n    function add_gexer( keymap, key, gexer ) {\n      if( !gexer ) return;\n\n      var g = (keymap.g = keymap.g || {})\n      var ga = (g[key] = g[key] || [])\n      ga.push( gexer )\n      ga.sort( function(a,b) {\n        return a.val$ < b.val$\n      })\n    }\n\n\n    self.findexact = function( pat ) {\n      return self.find( pat, true )\n    }\n\n\n    self.find = function( pat, exact ) {\n      if( null == pat ) return null;\n\n      var keymap    = top\n      var data      = void 0 === top.d ? null : top.d\n      var finalfind = top.f\n      var key       = null\n      var stars     = []\n      var foundkeys = {}\n      var patlen    = _.keys(pat).length\n\n      do {\n        key = keymap.k\n\n        if( keymap.v ) {\n          var val = pat[key]\n          var nextkeymap = keymap.v[val]\n\n          if( !nextkeymap && custom.gex && keymap.g && keymap.g[key] ) {\n            var ga = keymap.g[key]\n            for( var gi = 0; gi < ga.length; gi++ ) {\n              if( null != ga[gi].on(val) ) {\n                nextkeymap = keymap.v[ga[gi].val$]\n                break;\n              }\n            }\n          }\n\n          if( nextkeymap ) {\n            foundkeys[key]=true\n\n            if( keymap.s ) {\n              stars.push(keymap.s)\n            }\n\n            data      = void 0 === nextkeymap.d ? null : nextkeymap.d\n            finalfind = nextkeymap.f\n            keymap    = nextkeymap\n          }\n          else {\n            keymap = keymap.s\n          }\n        }\n        else {\n          keymap = null\n        }\n       \n        if( null == keymap && null == data && 0 < stars.length ) {\n          keymap = stars.pop()\n        }\n      }\n      while( keymap )\n\n      if( exact ) {\n        if( _.keys(foundkeys).length !== patlen ) {\n          data = null\n        }\n      }\n      else {\n        // If there's root data, return as a catch all\n        if( null == data && void 0 !== top.d ) {\n          data = top.d\n        }\n      }\n\n      if( finalfind ) {\n        data = finalfind.call(self,pat,data)\n      }\n\n      return data\n    }\n\n\n\n\n    self.remove = function( pat ) {\n      var keymap = top\n      var data = null\n      var key\n      var path = []\n\n      do {\n        key = keymap.k\n        \n        if( keymap.v ) {\n          var nextkeymap = keymap.v[pat[key]]\n          if( nextkeymap ) {\n            path.push({km:keymap,v:pat[key]})\n            data   = nextkeymap.d\n            keymap = nextkeymap\n          }\n          else {\n            keymap = keymap.s\n          }\n        }\n        else {\n          keymap = null\n        }\n      }\n      while( keymap )\n\n      if( void 0 !== data ) {\n        var part = path[path.length-1]\n        if( part && part.km && part.km.v ) {\n          var point = part.km.v[part.v]\n          if( !point.r || point.r(pat,point.d) ) {\n            delete point.d\n          }\n        }\n      }\n    }\n\n\n\n    // values can be verbatim, glob, or array of globs\n    self.list = function( pat, exact ) {\n      function descend(keymap,match,missing,acc) {\n\n        if( keymap.v ) {\n          var key = keymap.k\n          var gexval = gex( pat ? \n                            (null==pat[key] ?\n                             ( exact ? null : '*' )\n                             : pat[key]) \n                            : '*' )\n          var itermatch   = _.extend({},match)\n          var itermissing = _.extend({},missing)\n          var nextkeymap\n\n          for( var val in keymap.v ) {\n            if( gexval.on(val) ) {\n              var valitermatch = _.clone(itermatch)\n              valitermatch[key]=val\n\n              var valitermissing = _.extend({},itermissing)\n              delete valitermissing[key]\n\n              nextkeymap = keymap.v[ val ]\n\n              if( 0 === _.keys(valitermissing).length && \n                  nextkeymap && \n                  nextkeymap.d ) \n              {\n                acc.push({\n                  match:valitermatch,\n                  data:nextkeymap.d,\n                  find:nextkeymap.f,\n                })\n              }\n\n              if( nextkeymap && nextkeymap.v ) {\n                descend(\n                  nextkeymap, \n                  _.extend({},valitermatch), \n                  _.extend({},valitermissing), \n                  acc)\n              }\n            }\n          }\n\n          nextkeymap = keymap.s\n          if( nextkeymap ) {\n            descend(\n              nextkeymap, \n              _.extend({},itermatch), \n              _.extend({},itermissing), \n              acc)\n          }\n        }\n      }\n\n      var acc = []\n\n      if( top.d ) {\n        acc.push({\n          match:{},\n          data:top.d,\n          find:top.f,\n        })\n      }\n\n      descend(top,{},_.extend({},pat),acc)\n      return acc\n    }\n\n\n\n    self.toString = function() {\n      var tree = _.isBoolean( arguments[0] ) ? arguments[0] : !!arguments[1]\n\n      var dstr = _.isFunction( arguments[0] ) ?  arguments[0] : function(d) {\n        return _.isFunction(d) ? '<'+d.name+'>' : '<'+d+'>'\n      }\n\n\n      function indent(o,d) {\n        for(var i = 0; i < d; i++ ) {\n          o.push(' ')\n        }\n      }\n\n      var str = []\n\n      function walk(n,o,d,vs){\n        var vsc\n\n        if( void 0 !== n.d ) {\n          o.push(' '+dstr(n.d))\n\n          str.push( vs.join(', ')+' -> '+dstr(n.d))\n        }\n        if( n.k ) {\n          o.push('\\n')\n          indent(o,d)\n          o.push(n.k+':')\n        }\n        if( n.v ) {\n          d++\n          var pa = _.keys(n.v)\n          var pal = _.filter(pa,function(x){ return !x.match(/[\\*\\?]/) })\n          var pas = _.filter(pa,function(x){ return x.match(/[\\*\\?]/) })\n          pal.sort()\n          pas.sort()\n          pa = pal.concat(pas)\n\n          for( var pi = 0; pi < pa.length; pi++ ) {\n            var p = pa[pi]\n            o.push('\\n')\n            indent(o,d)\n            o.push( p+' ->')\n\n            vsc = _.clone(vs)\n            vsc.push(n.k+'='+p)\n\n            walk(n.v[p],o,d+1,vsc)\n          }\n\n          if( n.s ) {\n            o.push('\\n')\n            indent(o,d)\n            o.push( '|')\n\n            vsc = _.clone(vs)\n            walk(n.s,o,d+1,vsc)\n          }\n        }\n      }\n\n      var o = []\n      walk(top,o,0,[])\n      return tree ? o.join('') : str.join('\\n')\n    }\n\n\n    self.inspect = self.toString\n\n\n    self.toJSON = function(indent) {\n      return JSON.stringify(top,function(key,val){\n        if( _.isFunction(val) ) return '[Function]'\n        return val\n      },indent)\n    }\n\n    return self\n\n  }\n\n\n\n  if( typeof exports !== 'undefined' ) {\n    if( typeof module !== 'undefined' && module.exports ) {\n      exports = module.exports = patrun\n    }\n    exports.patrun = patrun\n  } \n  else {\n    root.patrun = patrun\n  }\n\n}).call(this);\n"]}