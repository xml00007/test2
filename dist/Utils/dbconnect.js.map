{"version":3,"sources":["../../Utils/dbconnect.js"],"names":["typeCast","field","next","global","__mysql_datetime_no_need_cast","type","string","databaseConfig","mongodb","hosts","database","user","pass","opts","authSource","mysql","password","option","dialectOptions","host","dialect","timezone","pool","max","min","idle","define","timestamps","jieaMySql","Sequelize","require","_mysql","seq","__seq"],"mappings":";;AAAA;AACA,IAAMA,WAAW,SAAXA,QAAW,CAASC,KAAT,EAAgBC,IAAhB,EAAsB;AACrC,MAAI,CAACC,OAAOC,6BAAR,IAAyCH,MAAMI,IAAN,KAAe,UAA5D,EAAwE;AACtE,WAAOJ,MAAMK,MAAN,EAAP;AACD;AACD,SAAOJ,MAAP;AACD,CALD;;AAQA,IAAMK,iBAAiB;AACrBC,WAAS;AACPC,WAAO,CACL,cADK,CADA;AAIPC,cAAU,cAJH;AAKPC,UAAM,OALC;AAMPC,UAAM,OANC;AAOPC,UAAM;AACJ;AACAC,kBAAY;AAFR;AAPC,GADY;AAarBC,SAAO;AACLL,cAAU,MADL;AAELC,UAAM,MAFD;AAGLK,cAAU,QAHL;AAILC,YAAQ;AACNC,sBAAgB;AACd;AACAlB,kBAAUA;AAFI,OADV;AAKNmB,YAAM,WALA;AAMNC,eAAS,OANH;AAONC,gBAAU,QAPJ,EAOc;AACpB;AACAC,YAAM;AACJC,aAAK,CADD;AAEJC,aAAK,CAFD;AAGJC,cAAM;AAHF,OATA;AAcNC,cAAQ;AACNC,oBAAY,KADN,CACY;AADZ;AAdF;AAJH,GAbc;AAoCrBC,aAAW;AACTT,UAAM,eADG;AAETR,UAAM,eAFG;AAGTK,cAAU,MAHD;AAITN,cAAU;AAJD;AApCU,CAAvB;;AA+CA,IAAMmB,YAAYC,QAAQ,WAAR,CAAlB;AACA,IAAMC,SAASxB,eAAeQ,KAA9B;;AAEA,IAAMiB,MAAM7B,OAAO8B,KAAP,GAAe,IAAIJ,SAAJ,CAAc,WAAd,EAA2B,MAA3B,EACvB,QADuB,EACbE,OAAOd,MADM,CAA3B","file":"dbconnect.js","sourcesContent":["// 日期格式转换\nconst typeCast = function(field, next) {\n  if (!global.__mysql_datetime_no_need_cast && field.type === 'DATETIME') {\n    return field.string();\n  }\n  return next();\n}\n\n\nconst databaseConfig = {\n  mongodb: {\n    hosts: [\n      '10.10.199.59',\n    ],\n    database: 'nirvana-node',\n    user: 'admin',\n    pass: 'puhui',\n    opts: {\n      // useMongoClient: true, // 由于开发环境的mongodb版本太低，useMongoClient 选项需关闭\n      authSource: 'admin',\n    },\n  },\n  mysql: {\n    database: 'test',\n    user: 'root',\n    password: '123456',\n    option: {\n      dialectOptions: {\n        // 时间类型 以字符串型式返回 \"2017-09-13T00:00:00Z\" 转换为 \"2017-09-13 00:00:00\"\n        typeCast: typeCast,\n      },\n      host: '127.0.0.1',\n      dialect: 'mysql',\n      timezone: '+08:00', // 时区 香港 北京\n      // mysql连接池配置\n      pool: {\n        max: 5,\n        min: 0,\n        idle: 10000,\n      },\n      define: {\n        timestamps: false // 不自动添加 updateAt 和 createdAt\n      },\n    },\n  },\n  jieaMySql: {\n    host: '10.10.229.152',\n    user: 'jiea_readonly',\n    password: 'jiea',\n    database: 'jiea_center_openline',\n  },\n};\n\n\n\n\nconst Sequelize = require('sequelize');\nconst _mysql = databaseConfig.mysql;\n\nconst seq = global.__seq = new Sequelize('127.0.0.1', 'root',\n    '123456', _mysql.option);"]}