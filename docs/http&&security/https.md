[https 与 http 的区别](https://developer.51cto.com/art/201910/604255.htm)

[https 加密解密](https://zhuanlan.zhihu.com/p/27395037)

[https://www.jianshu.com/p/6c981b44293d](https://www.jianshu.com/p/6c981b44293d)

[https://blog.csdn.net/qq_35642036/article/details/82788421#HTTPS%E7%9A%84%E7%BC%BA%E7%82%B9](https://blog.csdn.net/qq_35642036/article/details/82788421#HTTPS%E7%9A%84%E7%BC%BA%E7%82%B9)

## SSL、TSL 关系

Android 8.0 禁用了 SSL，所以我们一定非常好奇二者之间的区别，为什么会有两种协议，而且总是并列提起。
SSL 是 TLS 的前身，SSL 从 1.0、2.0 到 3.0 一步步修订，但安全性都不是非常完美。知道后来 SSL3.0 摇身一变变成 TLS1.0，发展至今已经达到 TLS1.2 的稳定版本。另外 18 年今年，TLS1.3 的草案也已经提出，在不断开发中吧

SSL 1.0，未发布公开，因为严重的安全性漏洞
SSL 2.0，1995.02，包含一些需要在 SSL3.0 解决的安全漏洞
SSL 2.0 在 2011 年被 RFC 6176 禁止
SSL 3.0，1996，代表着该协议的完整重新设计，
SSL 3.0 也在后来 June 2015 被 RFC 7568 禁止.
TLS 1.0 在 January 1999 首次在 RFC 2246 中定义，作为 SSL 3.0 的升级版本
TLS 1.1April 2006 在 RFC 4346 中定义
TLS 1.2August 2008 在 RFC 5246 定义，基于 TLS 1.1 进行升级

## 如何优化 HTTPS 的速度

1、HSTS 重定向技术

HSTS（HTTP Strict Transport Security）技术，启用 HSTS 后，将保证浏览器始终连接到网站的 HTTPS 加密版本。

        1. 用户在浏览器里输入 HTTP 协议进行访问时，浏览器会自动将 HTTP 转换为 HTTPS 进行访问，确保用户访问安全；

        2. 省去301跳转的出现，缩短访问时间；

        3. 能阻止基于 SSL Strip 的中间人攻击，万一证书有错误，则显示错误，用户不能回避警告，从而能够更加有效安全的保障用户的访问。

2、TLS 握手优化

        在传输应用数据之前，客户端必须与服务端协商密钥、加密算法等信息，服务端还要把自己的证书发给客户端表明其身份，这些环节构成 TLS 握手过程。

        采用 False Start （抢先开始）技术，浏览器在与服务器完成 TLS 握手前，就开始发送请求数据，服务器在收到这些数据后，完成 TLS 握手的同时，开始发送响应数据。

        开启 False Start 功能后，数据传输时间将进一步缩短。

3、Session Identifier（会话标识符）复用

        如果用户的一个业务请求包含了多条的加密流，客户端与服务器将会反复握手，必定会导致更多的时间损耗。或者某些特殊情况导致了对话突然中断，双方就需要重新握手，增加了用户访问时间。

        （1）服务器为每一次的会话都生成并记录一个 ID 号，然后发送给客户端；

        （2）如果客户端发起重新连接，则只要向服务器发送该 ID 号；

        （3）服务器收到客户端发来的 ID 号，然后查找自己的会话记录，匹配 ID 之后，双方就可以重新使用之前的对称加密秘钥进行数据加密传输，而不必重新生成，减少交互时间。

4、开启 OSCP Stapling，提高 TLS 握手效率

        采用OCSP Stapling ，提升 HTTPS 性能。服务端主动获取 OCSP 查询结果并随着证书一起发送给客户端，从而客户端可直接通过 Web Server 验证证书，提高 TLS 握手效率。

        服务器模拟浏览器向 CA 发起请求，并将带有 CA 机构签名的 OCSP 响应保存到本地，然后在与客户端握手阶段，将 OCSP 响应下发给浏览器，省去浏览器的在线验证过程。由于浏览器不需要直接向 CA 站点查询证书状态，这个功能对访问速度的提升非常明显。

5、完全前向加密 PFS，保护用户数据，预防私钥泄漏

        非对称加密算法 RSA，包含了公钥、私钥，其中私钥是保密不对外公开的，由于此算法既可以用于加密也可以用于签名，所以用途甚广，但是还是会遇到一些问题：

（1） 假如我是一名黑客，虽然现在我不知道私钥，但是我可以先把客户端与服务器之前的传输数据（已加密）全部保存下来

（2）如果某一天，服务器维护人员不小心把私钥泄露了，或者服务器被我攻破获取到了私钥

（3）那我就可以利用这个私钥，破解掉之前已被我保存的数据，从中获取有用的信息

        所以为了防止上述现象发生，我们必须保护好自己的私钥。

        如果私钥确实被泄漏了，那我们改如何补救呢？那就需要PFS（perfect forward secrecy）完全前向保密功能，此功能用于客户端与服务器交换对称密钥，起到前向保密的作用，也即就算私钥被泄漏，黑客也无法破解先前已加密的数据。维基解释是：长期使用的主密钥泄漏不会导致过去的会话密钥泄漏

        实现此功能需要服务器支持以下算法和签名组合：

（1）ECDHE 密钥交换、RSA 签名；

（2）ECDHE 密钥交换、ECDSA 签名；
